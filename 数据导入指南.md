# ğŸ“š 2024å¹´æ‰§ä¸šè¯å¸ˆä¸­è¯è¯ç»¼çœŸé¢˜å¯¼å…¥æŒ‡å—

## ğŸ” é—®é¢˜è¯Šæ–­

æ‚¨ä¿å­˜çš„ `quick_import_script.sql` æ–‡ä»¶ä¸å½“å‰ Prisma Schema **ä¸åŒ¹é…**ï¼Œå¯¼è‡´ï¼š

### âŒ SQLè„šæœ¬çš„é—®é¢˜
```sql
-- SQLè„šæœ¬ä½¿ç”¨çš„å­—æ®µï¼ˆä¸å­˜åœ¨äºPrismaï¼‰
INSERT INTO questions (
    subject_id,           -- âŒ Prismaä¸­æ˜¯ subject (å­—ç¬¦ä¸²)
    chapter_id,           -- âŒ Prismaä¸­æ˜¯ chapter (å­—ç¬¦ä¸²)  
    knowledge_point_id,   -- âŒ Prismaä¸­æ²¡æœ‰è¿™ä¸ªå­—æ®µ
    source_type,          -- âŒ Prismaä¸­æ²¡æœ‰è¿™ä¸ªå­—æ®µ
    source_institution_id,-- âŒ Prismaä¸­æ²¡æœ‰è¿™ä¸ªå­—æ®µ
    source_year,          -- âŒ Prismaä¸­æ²¡æœ‰è¿™ä¸ªå­—æ®µ
)
```

### âœ… Prisma Schema å®é™…å­—æ®µ
```prisma
model Question {
  examType        String   // è€ƒè¯•ç±»å‹ï¼ˆå¦‚ï¼šæ‰§ä¸šè¯å¸ˆï¼‰
  subject         String   // ç§‘ç›®ï¼ˆå¦‚ï¼šä¸­è¯å­¦ç»¼åˆçŸ¥è¯†ä¸æŠ€èƒ½ï¼‰
  chapter         String?  // ç« èŠ‚ï¼ˆå­—ç¬¦ä¸²ï¼ŒéIDï¼‰
  questionType    String   // é¢˜å‹ï¼šsingle/multiple/judge
  content         String   // é¢˜ç›®å†…å®¹
  options         Json     // é€‰é¡¹ JSON
  correctAnswer   String   // æ­£ç¡®ç­”æ¡ˆ
  explanation     String?  // è§£æ
  difficulty      Int      // éš¾åº¦ 1-5
  knowledgePoints String[] // çŸ¥è¯†ç‚¹æ•°ç»„
}
```

---

## âœ… è§£å†³æ–¹æ¡ˆ

### **æ–¹æ¡ˆ1ï¼šä½¿ç”¨ TypeScript å¯¼å…¥è„šæœ¬ï¼ˆæ¨èï¼‰**

#### æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–
```bash
npm install
```

#### æ­¥éª¤2ï¼šç”Ÿæˆ Prisma Client
```bash
npm run db:generate
```

#### æ­¥éª¤3ï¼šæ‰§è¡Œå¯¼å…¥è„šæœ¬
```bash
npx tsx prisma/import-2024-zhongyao.ts
```

å¯¼å…¥è„šæœ¬ä½ç½®ï¼š`prisma/import-2024-zhongyao.ts`

---

### **æ–¹æ¡ˆ2ï¼šé€šè¿‡ç®¡ç†åå°æ‰‹åŠ¨æ·»åŠ **

è®¿é—®ç®¡ç†åå°ï¼ˆéœ€è¦å…ˆå¼€å‘ï¼‰ï¼š
- `/admin/questions/create` - åˆ›å»ºé¢˜ç›®

---

### **æ–¹æ¡ˆ3ï¼šä½¿ç”¨ API æ‰¹é‡å¯¼å…¥**

åˆ›å»ºä¸€ä¸ªæ‰¹é‡å¯¼å…¥çš„ API æ¥å£ï¼š

```typescript
// app/api/admin/import-questions/route.ts
import { NextRequest, NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";

export async function POST(request: NextRequest) {
  const { questions } = await request.json();
  
  const results = await Promise.all(
    questions.map((q: any) =>
      prisma.question.create({ data: q })
    )
  );
  
  return NextResponse.json({ success: true, count: results.length });
}
```

ç„¶åå‘é€ POST è¯·æ±‚ï¼š
```bash
curl -X POST http://localhost:3000/api/admin/import-questions \
  -H "Content-Type: application/json" \
  -d '{"questions": [...]}'
```

---

## ğŸ“ æ•°æ®æ ¼å¼ç¤ºä¾‹

æ­£ç¡®çš„é¢˜ç›®æ•°æ®æ ¼å¼ï¼š

```typescript
{
  examType: 'æ‰§ä¸šè¯å¸ˆ',
  subject: 'ä¸­è¯å­¦ç»¼åˆçŸ¥è¯†ä¸æŠ€èƒ½',
  chapter: 'ä¸­åŒ»åŸºç¡€ç†è®º',
  questionType: 'single',  // single/multiple/judge
  content: 'å±äº"é˜³è„‰ä¹‹æµ·"çš„æ˜¯',
  options: [
    { key: 'A', value: 'é˜³ç»´ä¹‹è„‰' },
    { key: 'B', value: 'é˜³è··ä¹‹è„‰' },
    { key: 'C', value: 'ç£è„‰' },
    { key: 'D', value: 'å¸¦è„‰' },
    { key: 'E', value: 'ä»»è„‰' }
  ],
  correctAnswer: 'C',
  explanation: 'ç£è„‰ä¸º"é˜³è„‰ä¹‹æµ·"ã€‚ä»»è„‰ä¸º"é˜´è„‰ä¹‹æµ·"ã€‚',
  difficulty: 2,
  knowledgePoints: ['ç»ç»œå­¦è¯´', 'é«˜é¢‘è€ƒç‚¹']
}
```

---

## ğŸš€ å¿«é€Ÿå¯¼å…¥ç°æœ‰çš„2é“é¢˜ç›®

æˆ‘å·²ç»åœ¨ `prisma/import-2024-zhongyao.ts` ä¸­å‡†å¤‡äº†2é“é¢˜ç›®ä½œä¸ºç¤ºä¾‹ã€‚

**ç«‹å³æ‰§è¡Œå¯¼å…¥ï¼š**

```bash
# 1. ç¡®ä¿ä¾èµ–å·²å®‰è£…
npm install

# 2. ç”Ÿæˆ Prisma Client
npx prisma generate

# 3. æ‰§è¡Œå¯¼å…¥
npx tsx prisma/import-2024-zhongyao.ts
```

---

## ğŸ“Š éªŒè¯æ•°æ®æ˜¯å¦å¯¼å…¥æˆåŠŸ

### æ–¹æ³•1ï¼šä½¿ç”¨ Prisma Studio
```bash
npm run db:studio
```
è®¿é—® http://localhost:5555ï¼ŒæŸ¥çœ‹ `questions` è¡¨

### æ–¹æ³•2ï¼šç›´æ¥æŸ¥è¯¢æ•°æ®åº“
```bash
# ä½¿ç”¨ PostgreSQL å®¢æˆ·ç«¯
psql postgresql://postgres:yZaNnwx8VfkVRVkk@db.rekdretiemtoofrvcils.supabase.co:5432/postgres

# æŸ¥è¯¢é¢˜ç›®æ•°é‡
SELECT COUNT(*) FROM questions 
WHERE exam_type = 'æ‰§ä¸šè¯å¸ˆ' 
  AND subject = 'ä¸­è¯å­¦ç»¼åˆçŸ¥è¯†ä¸æŠ€èƒ½';
```

### æ–¹æ³•3ï¼šé€šè¿‡ API æŸ¥è¯¢
è®¿é—®ï¼š
```
http://localhost:3000/api/questions?examType=æ‰§ä¸šè¯å¸ˆ&subject=ä¸­è¯å­¦ç»¼åˆçŸ¥è¯†ä¸æŠ€èƒ½
```

---

## ğŸ¯ å¯¼å…¥å®Œæ•´120é“é¢˜ç›®

è¦å¯¼å…¥å®Œæ•´çš„120é“é¢˜ç›®ï¼Œè¯·ï¼š

1. **æ‰“å¼€æ–‡ä»¶**ï¼š`prisma/import-2024-zhongyao.ts`

2. **æŒ‰æ ¼å¼æ·»åŠ é¢˜ç›®**åˆ° `questions2024` æ•°ç»„ä¸­ï¼š
```typescript
const questions2024 = [
  // å·²æœ‰çš„2é“é¢˜...
  
  // ç¬¬3é¢˜
  {
    examType: 'æ‰§ä¸šè¯å¸ˆ',
    subject: 'ä¸­è¯å­¦ç»¼åˆçŸ¥è¯†ä¸æŠ€èƒ½',
    chapter: 'å¯¹åº”ç« èŠ‚',
    questionType: 'single',
    content: 'é¢˜ç›®å†…å®¹',
    options: [...],
    correctAnswer: 'A',
    explanation: 'è§£æ',
    difficulty: 2,
    knowledgePoints: ['çŸ¥è¯†ç‚¹1', 'çŸ¥è¯†ç‚¹2'],
  },
  
  // ç¬¬4-120é¢˜...ç»§ç»­æ·»åŠ 
];
```

3. **æ‰§è¡Œå¯¼å…¥**ï¼š
```bash
npx tsx prisma/import-2024-zhongyao.ts
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæ‰§è¡ŒSQLè„šæœ¬æ²¡ç”¨ï¼Ÿ
**A:** å› ä¸ºæ‚¨çš„SQLè„šæœ¬å­—æ®µç»“æ„ä¸Prisma Schemaä¸åŒ¹é…ã€‚å¿…é¡»ä¿®æ”¹SQLè„šæœ¬æˆ–ä½¿ç”¨TypeScriptå¯¼å…¥ã€‚

### Q2: å¦‚ä½•æ‰¹é‡è½¬æ¢SQLä¸ºTypeScriptæ ¼å¼ï¼Ÿ
**A:** å¯ä»¥ä½¿ç”¨è„šæœ¬è½¬æ¢ï¼Œæˆ–è€…æˆ‘å¯ä»¥å¸®æ‚¨ç¼–å†™è½¬æ¢å·¥å…·ã€‚

### Q3: æ•°æ®å¯¼å…¥åå‰ç«¯è¿˜æ˜¯çœ‹ä¸åˆ°ï¼Ÿ
**A:** æ£€æŸ¥ï¼š
1. æ•°æ®æ˜¯å¦æˆåŠŸå¯¼å…¥ï¼ˆä½¿ç”¨Prisma StudioæŸ¥çœ‹ï¼‰
2. `isPublished` å­—æ®µæ˜¯å¦ä¸º `true`
3. å‰ç«¯APIè°ƒç”¨çš„ `examType` å’Œ `subject` å‚æ•°æ˜¯å¦æ­£ç¡®

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœæ‚¨æœ‰å®Œæ•´çš„120é“é¢˜æ•°æ®ï¼ˆExcel/Wordæ ¼å¼ï¼‰ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ï¼š
1. è½¬æ¢ä¸ºæ­£ç¡®çš„æ•°æ®æ ¼å¼
2. æ‰¹é‡å¯¼å…¥åˆ°æ•°æ®åº“
3. éªŒè¯æ•°æ®å®Œæ•´æ€§

æä¾›æ•°æ®æ ¼å¼ï¼Œæˆ‘ä¼šä¸ºæ‚¨ç¼–å†™è‡ªåŠ¨åŒ–å¯¼å…¥è„šæœ¬ï¼
