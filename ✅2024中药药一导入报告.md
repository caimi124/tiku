# 2024年中药药学专业知识（一）历年真题导入报告

## ✅ 导入完成

### 📊 数据统计
- **题目总数**: 120道
- **图片数量**: 35张
- **科目**: 中药学专业知识（一）
- **年份**: 2024年
- **考试类型**: 执业药师

### 📋 题型分布
1. **一、最佳选择题**: 40道 (题号1-40)
2. **二、配伍选择题**: 50道 (题号41-90)
3. **三、综合分析题**: 20道 (题号91-110)
4. **四、多项选择题**: 10道 (题号111-120)

### 📷 图片题目
以下题目包含图片（每题5张选项图片）：

#### 最佳选择题（图片题）
- **题8**: 图示中药为半枝莲的是 (图片: 8-A.jpeg ~ 8-E.jpeg)
- **题9**: 图示中药为自然铜的是 (图片: 9-A.jpeg ~ 9-E.jpeg)
- **题10**: 图示中药为决明子的是 (图片: 10-A.jpeg ~ 10-E.jpeg)
- **题11**: 图示中药为知母的是 (图片: 11-A.jpeg ~ 11-E.jpeg)

#### 配伍选择题（图片题）
- **题61-62**: 图示中药为茜草/威灵仙 (图片: 61-62-A.jpeg ~ 61-62-E.jpeg)
- **题63-64**: 图示中药为肉桂/秦皮 (图片: 63-64-A.jpeg ~ 63-64-E.jpeg)

#### 综合分析题（图片题）
- **题90-92**: 结构类型判断题 (图片: 90-92-A.jpeg ~ 90-92-E.jpeg)

### 📁 文件位置

#### 数据库
- **数据库**: Supabase (tiku2项目)
- **表名**: questions
- **连接**: postgresql://postgres.tparjdkxxtnentsdazfw:***@aws-0-us-west-2.pooler.supabase.com:5432/postgres

#### 图片存储
- **源文件**: `E:\tiku\shuju\2024年执业药师中药药一历年真题\img\`
- **Web访问**: `E:\tiku\public\shuju\2024年执业药师中药药一历年真题\img\`
- **URL路径**: `/shuju/2024年执业药师中药药一历年真题/img/xxx.jpeg`

#### 导入脚本
- **脚本位置**: `E:\tiku\prisma\import-2024-zhongyao-yaoxue-yiyao.ts`
- **复制脚本**: `E:\tiku\copy-images-to-public.ts`
- **验证脚本**: `E:\tiku\verify-zhongyao-yaoxue-import.ts`

### 🔍 数据结构

#### questions表字段
```typescript
{
  exam_type: '执业药师',
  subject: '中药学专业知识（一）',
  chapter: '一、最佳选择题' | '二、配伍选择题' | '三、综合分析题' | '四、多项选择题',
  question_type: 'single' | 'match' | 'comprehensive' | 'multiple',
  content: string,  // 题目内容
  options: [{ key: 'A', value: '...' }, ...],
  correct_answer: string,  // 如 'A' 或 'A,B,C'
  explanation: string,  // 答案解析
  difficulty: 2,
  source_type: '历年真题',
  source_year: 2024,
  is_published: true,
  ai_explanation: JSON.stringify({ images: ['url1', 'url2', ...] })  // 图片URL数组
}
```

### 🎯 图片匹配规则

#### 最佳选择题
- 格式: `{题号}-{选项}.jpeg`
- 示例: `8-A.jpeg` 表示第8题A选项的图片

#### 配伍选择题
- 格式: `{起始题号}-{结束题号}-{选项}.jpeg`
- 示例: `61-62-A .jpeg` 表示61题和62题共用的A选项图片
- **注意**: 部分文件名中有空格（如 `61-62-A .jpeg`）

#### 综合分析题
- 格式: `{起始题号}-{结束题号}-{选项}.jpeg`
- 示例: `90-92-A.jpeg` 表示90-92题共用的A选项图片

### 🌐 访问方式

#### 前端访问路径（需要创建）
```
历年真题列表: /practice/history
2024年真题练习: /practice/history/2024?subject=中药学专业知识（一）
```

#### 图片URL示例
```
http://localhost:3000/shuju/2024年执业药师中药药一历年真题/img/8-A.jpeg
http://localhost:3000/shuju/2024年执业药师中药药一历年真题/img/61-62-A%20.jpeg
```

### 📝 前端显示逻辑

```typescript
// 解析图片数据
const imageData = question.ai_explanation 
  ? JSON.parse(question.ai_explanation) 
  : null;
const images = imageData?.images || [];

// 显示图片
{images.length > 0 && (
  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
    {images.map((url, index) => (
      <img 
        key={index}
        src={url}
        alt={`选项${String.fromCharCode(65 + index)}`}
        className="w-full rounded-lg"
      />
    ))}
  </div>
)}
```

### ✅ 验证命令

```bash
# 验证导入数据
npx tsx verify-zhongyao-yaoxue-import.ts

# 检查图片URL
npx tsx check-image-urls.ts
```

### 🔄 重新导入

如果需要重新导入数据：

```bash
# 1. 重新导入题目（会自动删除旧数据）
npx tsx prisma/import-2024-zhongyao-yaoxue-yiyao.ts

# 2. 确保图片已复制到public文件夹
npx tsx copy-images-to-public.ts
```

### 📌 注意事项

1. ✅ 题目已成功导入数据库，共120道
2. ✅ 图片已复制到public文件夹，共35张
3. ✅ 图片匹配规则已正确实现
4. ✅ 数据库中使用本地路径（`/shuju/...`），可直接通过Next.js访问
5. ⚠️ 部分图片文件名包含空格，已在脚本中处理
6. 💡 如需使用Supabase Storage，需先运行 `setup-storage-bucket.sql` 创建bucket

### 🚀 下一步

1. 访问 `/practice/history` 页面查看历年真题列表
2. 选择"2024年中药学专业知识（一）"开始练习
3. 图片会自动加载并显示在题目选项中

---

**导入时间**: 2024年11月21日  
**导入状态**: ✅ 成功  
**数据库**: tiku2 (Supabase)
