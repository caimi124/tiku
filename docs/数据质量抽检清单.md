# 西药二推荐系统数据质量抽检清单

## 使用说明

1. **访问数据质量自检 API**（仅开发环境）：
   ```
   GET /api/admin/data-quality
   ```

2. **查看抽检清单**：
   API 返回的 `抽检清单.数据` 字段包含从章节 9(抗感染)/8(内分泌)/5(心血管) 各抽取的 20 个知识点。

3. **人工检查项**：
   - ✅ `point_type` 是否合理标注（mechanism/clinical_use/adverse_reaction/contraindication/interaction/dosage）
   - ✅ `chapterId` 是否正确提取（应该对应章节 9/8/5）
   - ✅ `code` 格式是否规范（如 C9.1.1）
   - ✅ `title` 是否清晰描述知识点内容

## 抽检清单格式

```json
{
  "id": "知识点ID",
  "code": "知识点编码（如 C9.1.1）",
  "title": "知识点标题",
  "point_type": "考点类型（mechanism/clinical_use/...）",
  "chapterId": 章节ID（9/8/5）,
  "chapter_code": "章节编码"
}
```

## 快速检查步骤

1. 打开浏览器开发者工具（F12）
2. 访问：`http://localhost:3000/api/admin/data-quality`（开发环境）
3. 查看返回的 JSON 数据
4. 检查 `抽检清单.数据` 数组中的每个知识点：
   - 确认 `point_type` 不为 null 且值合理
   - 确认 `chapterId` 与章节匹配（9/8/5）
   - 确认 `code` 格式正确

## 预期结果

- **point_type 覆盖率**：应 > 80%
- **chapterId 提取失败率**：应 < 10%
- **抽检清单**：每个章节至少 20 个知识点，且 point_type 和 chapterId 都正确

## 问题处理

如果发现数据质量问题：

1. **point_type 缺失**：需要在 `knowledge_tree` 表中补充 `point_type` 字段
2. **chapterId 提取失败**：检查 `code` 格式，确保符合 `C{数字}` 或 `{数字}.{数字}.{数字}` 格式
3. **章节不匹配**：检查知识点的 `parent_id` 关联关系是否正确

