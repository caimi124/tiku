# 西药药二知识点提取脚本说明

## 脚本文件

### 1. `extract_xiyao_er_knowledge_v2.py` - 增强版提取脚本

这是主要的知识点提取脚本，从 `layout.json` 中提取西药药二的完整知识点信息。

#### 功能特点：
- ✅ 解析 layout.json 中的表格 HTML 数据
- ✅ 提取药物分类和代表药品
- ✅ 提取药物作用机制
- ✅ 提取药物作用特点
- ✅ 提取典型不良反应（按严重程度分级）
- ✅ 提取药物相互作用
- ✅ 提取禁忌证
- ✅ 记录图片引用路径
- ✅ 提取考点信息和考试年份

#### 使用方法：
```bash
python extract_xiyao_er_knowledge_v2.py
```

#### 输入文件：
- `shuju/layout.json` - PDF解析后的布局数据
- `shuju/images/` - PDF中的图片文件

#### 输出文件：
- `shuju/西药药二_知识点_完整版.json` - 完整的知识点数据

## 提取结果统计

最新提取结果：
- 药物数量: 106
- 考点数量: 33
- 表格数量: 92
- 图片引用: 51

## 数据结构

### 药物信息结构
```json
{
  "名称": "阿司匹林",
  "分类": "第一节 解热、镇痛、抗炎药",
  "亚类": "非选择性COX抑制剂",
  "作用特点": {
    "作用机制": ["..."],
    "选择性": "",
    "适应证": [],
    "药动学": {},
    "特殊特点": ["..."]
  },
  "不良反应": {
    "严重": ["瑞夷综合征...", "胃肠道反应..."],
    "中度": [],
    "轻度": [],
    "常见": [],
    "典型": ["..."]
  },
  "药物相互作用": {
    "协同": [],
    "拮抗": [],
    "禁忌合用": [],
    "慎重合用": [],
    "一般": ["与其他NSAIDs合用...", "与对乙酰氨基酚合用..."]
  },
  "禁忌证": [],
  "注意事项": [],
  "用法用量": {},
  "临床应用": [],
  "特殊人群用药": {},
  "考点标记": [],
  "相关图片": []
}
```

## 图片处理说明

`shuju/images/` 目录中的图片包含了教材中的表格和图示，这些图片包含：
- 药物分类表
- 作用特点对比表
- 典型不良反应表
- 药物相互作用表
- 作用机制示意图

### 已提取的图片表格内容
layout.json 中已经包含了大部分表格的 HTML 数据，脚本会自动解析这些数据。

### 需要OCR处理的图片
部分图片可能没有对应的 HTML 数据，如果需要进一步提取这些图片中的文字，可以：
1. 使用 Python 的 `pytesseract` 库进行 OCR
2. 使用在线 OCR 服务
3. 手动补充关键信息

## 后续优化建议

1. **增加更多药物名称识别**
   - 当前已包含 100+ 常见药物
   - 可根据需要扩展药物列表

2. **OCR 图片处理**
   - 对于没有 HTML 数据的图片表格，可以添加 OCR 功能

3. **数据验证**
   - 添加数据完整性检查
   - 标记缺失信息的药物

4. **导出格式**
   - 支持导出为 SQL 语句
   - 支持导出为 CSV 格式
   - 支持导出为 Markdown 格式

## 依赖安装

```bash
pip install beautifulsoup4
```

## 相关文件

- `extract_xiyao_er_knowledge.py` - 原始版本脚本
- `extract_markdown_knowledge.py` - Markdown 笔记提取脚本
- `西药药二-药理学树状复习笔记.md` - Markdown 格式的复习笔记
