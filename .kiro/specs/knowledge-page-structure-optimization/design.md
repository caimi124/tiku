# çŸ¥è¯†å›¾è°±é¡µé¢ç»“æ„ä¼˜åŒ– - è®¾è®¡æ–‡æ¡£

## Overview

æœ¬è®¾è®¡æ–‡æ¡£æè¿°çŸ¥è¯†å›¾è°±é¡µé¢çš„å…¨é¢é‡æ„æ–¹æ¡ˆï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼š

1. **å››çº§å±‚çº§ç»“æ„** - ç« èŠ‚â†’å°èŠ‚â†’è€ƒç‚¹åˆ—è¡¨â†’è€ƒç‚¹è¯¦æƒ…é¡µï¼Œéµå¾ªæ•™æç»“æ„
2. **å…¥å£/è¯¦æƒ…åˆ†ç¦»** - åˆ—è¡¨é¡µåªå±•ç¤ºæ ‡é¢˜+æ ‡ç­¾+ç®€ä»‹ï¼Œè¯¦æƒ…é¡µæ‰¿è½½å®Œæ•´å†…å®¹
3. **å¯è§†åŒ–å›¾è°±è§†å›¾** - æä¾›æ ‘çŠ¶è§†å›¾å’Œå›¾è°±è§†å›¾åˆ‡æ¢
4. **è€ƒç‚¹ä¼˜å…ˆçº§æ ‡ç­¾** - é«˜é¢‘/å¿…è€ƒ/æ˜“é”™/åŸºç¡€/å¼ºåŒ–äº”ç§æ ‡ç­¾
5. **ä¸‰å±‚å¯¼èˆªä½“ç³»** - é¢åŒ…å±‘+å³ä¾§ç›®å½•+ä¸Šä¸‹å¯¼èˆª
6. **ä¸‰æ¬¡ç‚¹å‡»è§„åˆ™** - ç¡®ä¿ç”¨æˆ·â‰¤3æ¬¡æ“ä½œåˆ°è¾¾ç›®æ ‡å†…å®¹

## Architecture

### é¡µé¢ç»“æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         çŸ¥è¯†å›¾è°±é¦–é¡µ /knowledge                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ” å…¨å±€æœç´¢æ¡†                    [æ ‘çŠ¶è§†å›¾] [å›¾è°±è§†å›¾]              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“Š æ•´ä½“ç»Ÿè®¡ï¼šXç« èŠ‚ | Yå°èŠ‚ | Zè€ƒç‚¹ | æŒæ¡åº¦ XX%                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ç¬¬ä¸€ç«       â”‚ â”‚ ç¬¬äºŒç«       â”‚ â”‚ ç¬¬ä¸‰ç«       â”‚ â”‚ ç¬¬å››ç«       â”‚       â”‚
â”‚  â”‚ è§£çƒ­é•‡ç—›è¯  â”‚ â”‚ æŠ—èŒè¯ç‰©    â”‚ â”‚ å¿ƒè¡€ç®¡è¯    â”‚ â”‚ æ¶ˆåŒ–ç³»ç»Ÿè¯  â”‚       â”‚
â”‚  â”‚ 5å°èŠ‚|20è€ƒç‚¹â”‚ â”‚ 8å°èŠ‚|35è€ƒç‚¹â”‚ â”‚ 6å°èŠ‚|28è€ƒç‚¹â”‚ â”‚ 4å°èŠ‚|15è€ƒç‚¹â”‚       â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 60% â”‚ â”‚ â–ˆâ–ˆâ–‘â–‘â–‘â–‘ 30% â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 80% â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘ 0%  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ ç‚¹å‡»ç« èŠ‚å¡ç‰‡
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç« èŠ‚é¡µ /knowledge/chapter/[chapterId]                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  é¦–é¡µ > çŸ¥è¯†åº“ > ç¬¬ä¸€ç« ï¼šè§£çƒ­ã€é•‡ç—›ã€æŠ—ç‚è¯                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“‹ ç« èŠ‚æ¦‚è§ˆï¼š5å°èŠ‚ | 20è€ƒç‚¹ | é«˜é¢‘è€ƒç‚¹8ä¸ª | å»ºè®®å­¦ä¹ æ—¶é—´2å°æ—¶       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ ç¬¬ä¸€èŠ‚              â”‚ â”‚ ç¬¬äºŒèŠ‚              â”‚                        â”‚
â”‚  â”‚ ç§‹æ°´ä»™ç¢±ä¸ç—›é£è¯ç‰©  â”‚ â”‚ éç”¾ä½“æŠ—ç‚è¯        â”‚                        â”‚
â”‚  â”‚ 4è€ƒç‚¹ | é«˜é¢‘2ä¸ª     â”‚ â”‚ 6è€ƒç‚¹ | é«˜é¢‘3ä¸ª     â”‚                        â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 75%         â”‚ â”‚ â–ˆâ–ˆâ–‘â–‘â–‘â–‘ 40%         â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”‚
                              â”‚ ç‚¹å‡»å°èŠ‚å¡ç‰‡
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       å°èŠ‚é¡µ /knowledge/chapter/[chapterId]/section/[sectionId]          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  é¦–é¡µ > çŸ¥è¯†åº“ > ç¬¬ä¸€ç«  > ç¬¬ä¸€èŠ‚ï¼šç§‹æ°´ä»™ç¢±ä¸ç—›é£è¯ç‰©                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“‹ è€ƒç‚¹æ¢³ç†                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ æœ¬èŠ‚å…±4ä¸ªè€ƒç‚¹ | é«˜é¢‘2ä¸ª | å»ºè®®å­¦ä¹ æ—¶é—´30åˆ†é’Ÿ                   â”‚  â”‚â”‚
â”‚  â”‚  â”‚ â€¢ è€ƒç‚¹1ï¼šç§‹æ°´ä»™ç¢±çš„ä¸´åºŠç”¨è¯ [é«˜é¢‘] 2020ã€2022ã€2024è€ƒè¿‡        â”‚  â”‚â”‚
â”‚  â”‚  â”‚ â€¢ è€ƒç‚¹2ï¼šç§‹æ°´ä»™ç¢±çš„ä¸è‰¯ååº” [æ˜“é”™] 2021ã€2023è€ƒè¿‡              â”‚  â”‚â”‚
â”‚  â”‚  â”‚ â€¢ è€ƒç‚¹3ï¼šç—›é£æ€¥æ€§å‘ä½œçš„ä¸€çº¿ç”¨è¯ [é«˜é¢‘] å‡ ä¹æ¯å¹´è€ƒ              â”‚  â”‚â”‚
â”‚  â”‚  â”‚ â€¢ è€ƒç‚¹4ï¼šç—›é£çš„é¢„é˜²ç”¨è¯ [åŸºç¡€]                                 â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“š è€ƒç‚¹åˆ—è¡¨                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ è€ƒç‚¹1ï¼šç§‹æ°´ä»™ç¢±çš„ä¸´åºŠç”¨è¯                    [é«˜é¢‘] â­â­â­â­â­  â”‚  â”‚â”‚
â”‚  â”‚  â”‚ ç§‹æ°´ä»™ç¢±æ˜¯æ²»ç–—æ€¥æ€§ç—›é£æ€§å…³èŠ‚ç‚çš„é¦–é€‰è¯ç‰©                       â”‚  â”‚â”‚
â”‚  â”‚  â”‚ 2020ã€2022ã€2024 è€ƒè¿‡                                          â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ è€ƒç‚¹2ï¼šç§‹æ°´ä»™ç¢±çš„ä¸è‰¯ååº”                    [æ˜“é”™] â­â­â­â­    â”‚  â”‚â”‚
â”‚  â”‚  â”‚ ä¸»è¦ä¸è‰¯ååº”åŒ…æ‹¬èƒƒè‚ é“ååº”ã€éª¨é«“æŠ‘åˆ¶ç­‰                         â”‚  â”‚â”‚
â”‚  â”‚  â”‚ 2021ã€2023 è€ƒè¿‡                                                â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ ç‚¹å‡»è€ƒç‚¹å¡ç‰‡
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è€ƒç‚¹è¯¦æƒ…é¡µ /knowledge/point/[pointId]                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  é¦–é¡µ > çŸ¥è¯†åº“ > ç¬¬ä¸€ç«  > ç¬¬ä¸€èŠ‚ > è€ƒç‚¹1ï¼šç§‹æ°´ä»™ç¢±çš„ä¸´åºŠç”¨è¯         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“– ä¸“ä¸šå†…å®¹                            â”‚ â”‚  ğŸ“‘ æœ¬èŠ‚è€ƒç‚¹            â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚  â€¢ è€ƒç‚¹1 â† å½“å‰        â”‚â”‚
â”‚  â”‚  â”‚ è€ƒç‚¹ç®€ä»‹                            â”‚â”‚ â”‚  â€¢ è€ƒç‚¹2               â”‚â”‚
â”‚  â”‚  â”‚ ç§‹æ°´ä»™ç¢±æ˜¯æ²»ç–—æ€¥æ€§ç—›é£çš„é¦–é€‰è¯...   â”‚â”‚ â”‚  â€¢ è€ƒç‚¹3               â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚  â€¢ è€ƒç‚¹4               â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚  â”‚ æ ¸å¿ƒè®°å¿†ç‚¹                          â”‚â”‚                           â”‚
â”‚  â”‚  â”‚ â€¢ é¦–é€‰è¯ç‰©                          â”‚â”‚                           â”‚
â”‚  â”‚  â”‚ â€¢ 24å°æ—¶å†…ä½¿ç”¨æ•ˆæœæœ€ä½³              â”‚â”‚                           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                           â”‚
â”‚  â”‚  â”‚ ä½œç”¨æœºåˆ¶                            â”‚â”‚                           â”‚
â”‚  â”‚  â”‚ æŠ‘åˆ¶ç™½ç»†èƒè¶‹åŒ–å’Œåå™¬ä½œç”¨...         â”‚â”‚                           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                           â”‚
â”‚  â”‚  â”‚ ä¸è‰¯ååº”                            â”‚â”‚                           â”‚
â”‚  â”‚  â”‚ [ä¸¥é‡] éª¨é«“æŠ‘åˆ¶                     â”‚â”‚                           â”‚
â”‚  â”‚  â”‚ [ä¸­åº¦] èƒƒè‚ é“ååº”                   â”‚â”‚                           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                           â”‚
â”‚  â”‚  â”‚ [â† ä¸Šä¸€è€ƒç‚¹]    [ä¸‹ä¸€è€ƒç‚¹ â†’]        â”‚â”‚                           â”‚
â”‚  â”‚  â”‚ [ç›¸å…³çœŸé¢˜]      [å¼€å§‹ç»ƒä¹ ]          â”‚â”‚                           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     æ•°æ®åº“        â”‚â”€â”€â”€â”€â–¶â”‚      APIå±‚       â”‚â”€â”€â”€â”€â–¶â”‚     å‰ç«¯é¡µé¢      â”‚
â”‚                  â”‚     â”‚                  â”‚     â”‚                  â”‚
â”‚ knowledge_tree   â”‚     â”‚ /api/chapters    â”‚     â”‚ /knowledge       â”‚
â”‚ (ç« èŠ‚/å°èŠ‚/è€ƒç‚¹) â”‚     â”‚                  â”‚     â”‚ (é¦–é¡µ-ç« èŠ‚åˆ—è¡¨)  â”‚
â”‚                  â”‚     â”‚ /api/chapter/    â”‚     â”‚                  â”‚
â”‚ point_tags       â”‚     â”‚ [id]/sections    â”‚     â”‚ /knowledge/      â”‚
â”‚ (è€ƒç‚¹æ ‡ç­¾)       â”‚     â”‚                  â”‚     â”‚ chapter/[id]     â”‚
â”‚                  â”‚     â”‚ /api/section/    â”‚     â”‚ (ç« èŠ‚-å°èŠ‚åˆ—è¡¨)  â”‚
â”‚ exam_years       â”‚     â”‚ [id]/points      â”‚     â”‚                  â”‚
â”‚ (å†å¹´è€ƒæŸ¥)       â”‚     â”‚                  â”‚     â”‚ /knowledge/      â”‚
â”‚                  â”‚     â”‚ /api/point/[id]  â”‚     â”‚ chapter/.../     â”‚
â”‚ point_content    â”‚     â”‚                  â”‚     â”‚ section/[id]     â”‚
â”‚ (è€ƒç‚¹å†…å®¹)       â”‚     â”‚ /api/search      â”‚     â”‚ (å°èŠ‚-è€ƒç‚¹åˆ—è¡¨)  â”‚
â”‚                  â”‚     â”‚                  â”‚     â”‚                  â”‚
â”‚                  â”‚     â”‚                  â”‚     â”‚ /knowledge/      â”‚
â”‚                  â”‚     â”‚                  â”‚     â”‚ point/[id]       â”‚
â”‚                  â”‚     â”‚                  â”‚     â”‚ (è€ƒç‚¹è¯¦æƒ…)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


## Components and Interfaces

### 1. å‰ç«¯é¡µé¢ç»“æ„

```
app/knowledge/
â”œâ”€â”€ page.tsx                              # çŸ¥è¯†å›¾è°±é¦–é¡µï¼ˆç« èŠ‚åˆ—è¡¨ï¼‰
â”œâ”€â”€ chapter/
â”‚   â””â”€â”€ [chapterId]/
â”‚       â”œâ”€â”€ page.tsx                      # ç« èŠ‚é¡µï¼ˆå°èŠ‚åˆ—è¡¨ï¼‰
â”‚       â””â”€â”€ section/
â”‚           â””â”€â”€ [sectionId]/
â”‚               â””â”€â”€ page.tsx              # å°èŠ‚é¡µï¼ˆè€ƒç‚¹åˆ—è¡¨ï¼‰
â”œâ”€â”€ point/
â”‚   â””â”€â”€ [pointId]/
â”‚       â””â”€â”€ page.tsx                      # è€ƒç‚¹è¯¦æƒ…é¡µ
â”œâ”€â”€ graph/
â”‚   â””â”€â”€ page.tsx                          # å›¾è°±è§†å›¾é¡µé¢
â””â”€â”€ components/
    â”œâ”€â”€ ChapterCard.tsx                   # ç« èŠ‚å¡ç‰‡
    â”œâ”€â”€ SectionCard.tsx                   # å°èŠ‚å¡ç‰‡
    â”œâ”€â”€ PointCard.tsx                     # è€ƒç‚¹å¡ç‰‡ï¼ˆå…¥å£ï¼‰
    â”œâ”€â”€ PointOverview.tsx                 # è€ƒç‚¹æ¢³ç†åŒºåŸŸ
    â”œâ”€â”€ PointDetailContent.tsx            # è€ƒç‚¹è¯¦æƒ…å†…å®¹
    â”œâ”€â”€ ContentModule.tsx                 # å†…å®¹æ¨¡å—ï¼ˆå¯æŠ˜å ï¼‰
    â”œâ”€â”€ KnowledgeGraph.tsx                # å›¾è°±è§†å›¾ç»„ä»¶
    â”œâ”€â”€ GlobalSearch.tsx                  # å…¨å±€æœç´¢ç»„ä»¶
    â”œâ”€â”€ Breadcrumb.tsx                    # é¢åŒ…å±‘å¯¼èˆª
    â”œâ”€â”€ SectionTOC.tsx                    # å³ä¾§ç›®å½•ï¼ˆåŒå°èŠ‚è€ƒç‚¹ï¼‰
    â”œâ”€â”€ PointNavigation.tsx               # ä¸Šä¸‹è€ƒç‚¹å¯¼èˆª
    â””â”€â”€ TagBadge.tsx                      # æ ‡ç­¾å¾½ç« ç»„ä»¶
```

### 2. APIæ¥å£è®¾è®¡

#### 2.1 ç« èŠ‚åˆ—è¡¨API `/api/chapters`

```typescript
// GET /api/chapters?subject=xiyao_yaoxue_er
interface ChaptersResponse {
  success: boolean
  data: {
    chapters: ChapterSummary[]
    stats: {
      total_chapters: number
      total_sections: number
      total_points: number
      overall_mastery: number
    }
  }
}

interface ChapterSummary {
  id: string
  code: string              // "1", "2"
  title: string             // "è§£çƒ­ã€é•‡ç—›ã€æŠ—ç‚ã€æŠ—é£æ¹¿åŠæŠ—ç—›é£è¯"
  section_count: number
  point_count: number
  high_frequency_count: number
  mastery_score: number     // 0-100
}
```

#### 2.2 å°èŠ‚åˆ—è¡¨API `/api/chapter/[chapterId]/sections`

```typescript
// GET /api/chapter/[chapterId]/sections
interface SectionsResponse {
  success: boolean
  data: {
    chapter: {
      id: string
      title: string
      code: string
    }
    sections: SectionSummary[]
    stats: {
      total_sections: number
      total_points: number
      high_frequency_count: number
      suggested_time: number  // åˆ†é’Ÿ
    }
  }
}

interface SectionSummary {
  id: string
  code: string              // "1.1", "1.2"
  title: string             // "ç§‹æ°´ä»™ç¢±ä¸ç—›é£è¯ç‰©"
  point_count: number
  high_frequency_count: number
  mastery_score: number
}
```

#### 2.3 è€ƒç‚¹åˆ—è¡¨API `/api/section/[sectionId]/points`

```typescript
// GET /api/section/[sectionId]/points
interface PointsResponse {
  success: boolean
  data: {
    chapter: { id: string; title: string; code: string }
    section: { id: string; title: string; code: string }
    overview: PointOverview
    points: PointSummary[]
  }
}

interface PointOverview {
  total_points: number
  high_frequency_count: number
  tag_distribution: { [tag: string]: number }
  suggested_time: number
  trend_summary: string     // "æœ¬èŠ‚è¿‘3å¹´è€ƒæŸ¥é¢‘ç‡ä¸Šå‡"
  recommended_points: string[]  // æ¨èé‡ç‚¹å…³æ³¨çš„è€ƒç‚¹ID
}

interface PointSummary {
  id: string
  code: string              // "1.1.1"
  title: string             // "ç§‹æ°´ä»™ç¢±çš„ä¸´åºŠç”¨è¯"
  key_takeaway: string      // ä¸€å¥è¯ç®€ä»‹ï¼ˆâ‰¤40å­—ï¼‰
  tags: PointTag[]
  exam_years: number[]
  importance: number        // 1-5
  mastery_score: number
}

interface PointTag {
  type: 'high_frequency' | 'must_test' | 'easy_mistake' | 'basic' | 'reinforce'
  label: string
  color: string
}
```

#### 2.4 è€ƒç‚¹è¯¦æƒ…API `/api/point/[pointId]`

```typescript
// GET /api/point/[pointId]
interface PointDetailResponse {
  success: boolean
  data: {
    point: PointDetail
    navigation: {
      prev_point?: { id: string; title: string }
      next_point?: { id: string; title: string }
      section_points: { id: string; title: string }[]
    }
    breadcrumb: BreadcrumbItem[]
  }
}

interface PointDetail {
  id: string
  title: string
  chapter: { id: string; title: string; code: string }
  section: { id: string; title: string; code: string }
  tags: PointTag[]
  exam_years: number[]
  importance: number
  
  // å†…å®¹æ¨¡å—
  summary?: string
  core_memory_points?: string[]
  mechanism?: string
  clinical_application?: string
  adverse_reactions?: AdverseReaction[]
  contraindications?: string
  drug_interactions?: string
  mnemonics?: string
  mind_map_url?: string
  images?: string[]
  related_questions?: string[]  // ç›¸å…³çœŸé¢˜ID
}

interface BreadcrumbItem {
  label: string
  url: string
  type: 'home' | 'chapter' | 'section' | 'point'
}
```

#### 2.5 æœç´¢API `/api/knowledge/search`

```typescript
// GET /api/knowledge/search?q=ç§‹æ°´ä»™ç¢±&subject=xiyao_yaoxue_er
interface SearchResponse {
  success: boolean
  data: {
    query: string
    results: {
      chapters: SearchResult[]
      sections: SearchResult[]
      points: SearchResult[]
    }
    total_count: number
    suggestions?: string[]  // æœç´¢å»ºè®®
  }
}

interface SearchResult {
  id: string
  title: string
  path: string              // "ç¬¬ä¸€ç«  > ç¬¬ä¸€èŠ‚ > è€ƒç‚¹1"
  url: string
  highlight?: string        // é«˜äº®åŒ¹é…çš„å†…å®¹ç‰‡æ®µ
  relevance_score: number
}
```


### 3. ç»„ä»¶æ¥å£å®šä¹‰

#### 3.1 ChapterCard ç»„ä»¶

```typescript
interface ChapterCardProps {
  chapter: ChapterSummary
  onClick: (chapterId: string) => void
}
```

#### 3.2 SectionCard ç»„ä»¶

```typescript
interface SectionCardProps {
  section: SectionSummary
  onClick: (sectionId: string) => void
}
```

#### 3.3 PointCard ç»„ä»¶ï¼ˆå…¥å£å¡ç‰‡ï¼‰

```typescript
interface PointCardProps {
  point: PointSummary
  onClick: (pointId: string) => void
  onScrollTo?: () => void  // ä»è€ƒç‚¹æ¢³ç†ç‚¹å‡»æ—¶çš„æ»šåŠ¨å›è°ƒ
}
```

#### 3.4 PointOverview ç»„ä»¶ï¼ˆè€ƒç‚¹æ¢³ç†ï¼‰

```typescript
interface PointOverviewProps {
  overview: PointOverview
  points: PointSummary[]
  onPointClick: (pointId: string) => void
}
```

#### 3.5 ContentModule ç»„ä»¶ï¼ˆå¯æŠ˜å å†…å®¹æ¨¡å—ï¼‰

```typescript
interface ContentModuleProps {
  title: string
  icon: React.ReactNode
  children: React.ReactNode
  defaultExpanded?: boolean
  collapsible?: boolean  // ç§»åŠ¨ç«¯é»˜è®¤å¯æŠ˜å 
}
```

#### 3.6 TagBadge ç»„ä»¶

```typescript
interface TagBadgeProps {
  tag: PointTag
  size?: 'sm' | 'md' | 'lg'
}

// æ ‡ç­¾é¢œè‰²æ˜ å°„
const TAG_COLORS = {
  high_frequency: { bg: 'bg-red-100', text: 'text-red-700', border: 'border-red-200' },
  must_test: { bg: 'bg-orange-100', text: 'text-orange-700', border: 'border-orange-200' },
  easy_mistake: { bg: 'bg-yellow-100', text: 'text-yellow-700', border: 'border-yellow-200' },
  basic: { bg: 'bg-blue-100', text: 'text-blue-700', border: 'border-blue-200' },
  reinforce: { bg: 'bg-purple-100', text: 'text-purple-700', border: 'border-purple-200' },
}
```

#### 3.7 Breadcrumb ç»„ä»¶

```typescript
interface BreadcrumbProps {
  items: BreadcrumbItem[]
  mobile?: boolean  // ç§»åŠ¨ç«¯æŠ˜å æ¨¡å¼
}
```

#### 3.8 SectionTOC ç»„ä»¶ï¼ˆå³ä¾§ç›®å½•ï¼‰

```typescript
interface SectionTOCProps {
  points: { id: string; title: string }[]
  currentPointId: string
  onPointClick: (pointId: string) => void
}
```

#### 3.9 PointNavigation ç»„ä»¶ï¼ˆä¸Šä¸‹å¯¼èˆªï¼‰

```typescript
interface PointNavigationProps {
  prevPoint?: { id: string; title: string }
  nextPoint?: { id: string; title: string }
  onNavigate: (pointId: string) => void
}
```

#### 3.10 KnowledgeGraph ç»„ä»¶ï¼ˆå›¾è°±è§†å›¾ï¼‰

```typescript
interface KnowledgeGraphProps {
  data: GraphData
  onNodeClick: (nodeId: string, nodeType: 'chapter' | 'section' | 'point') => void
  selectedNodeId?: string
}

interface GraphData {
  nodes: GraphNode[]
  edges: GraphEdge[]
}

interface GraphNode {
  id: string
  label: string
  type: 'chapter' | 'section' | 'point'
  importance?: number
  chapterId?: string  // ç”¨äºé¢œè‰²åˆ†ç»„
}

interface GraphEdge {
  source: string
  target: string
}
```

#### 3.11 GlobalSearch ç»„ä»¶

```typescript
interface GlobalSearchProps {
  onSearch: (query: string) => void
  onResultClick: (result: SearchResult) => void
  placeholder?: string
}
```

## Data Models

### 1. æ•°æ®åº“è¡¨ç»“æ„

```sql
-- æ‰©å±• knowledge_tree è¡¨ï¼Œæ·»åŠ æ–°å­—æ®µ
ALTER TABLE knowledge_tree ADD COLUMN IF NOT EXISTS key_takeaway TEXT;
ALTER TABLE knowledge_tree ADD COLUMN IF NOT EXISTS exam_years INTEGER[] DEFAULT '{}';
ALTER TABLE knowledge_tree ADD COLUMN IF NOT EXISTS exam_frequency INTEGER DEFAULT 0;

-- è€ƒç‚¹æ ‡ç­¾è¡¨
CREATE TABLE IF NOT EXISTS point_tags (
    id TEXT PRIMARY KEY DEFAULT gen_random_uuid()::text,
    point_id TEXT NOT NULL REFERENCES knowledge_tree(id) ON DELETE CASCADE,
    tag_type TEXT NOT NULL CHECK (tag_type IN ('high_frequency', 'must_test', 'easy_mistake', 'basic', 'reinforce')),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(point_id, tag_type)
);

-- æœç´¢ç´¢å¼•ï¼ˆå…¨æ–‡æœç´¢ï¼‰
ALTER TABLE knowledge_tree ADD COLUMN IF NOT EXISTS search_vector tsvector;

CREATE OR REPLACE FUNCTION update_search_vector() RETURNS trigger AS $$
BEGIN
  NEW.search_vector := 
    setweight(to_tsvector('simple', coalesce(NEW.title, '')), 'A') ||
    setweight(to_tsvector('simple', coalesce(NEW.key_takeaway, '')), 'B') ||
    setweight(to_tsvector('simple', coalesce(NEW.content, '')), 'C');
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER knowledge_tree_search_update
  BEFORE INSERT OR UPDATE ON knowledge_tree
  FOR EACH ROW EXECUTE FUNCTION update_search_vector();

CREATE INDEX IF NOT EXISTS idx_knowledge_tree_search ON knowledge_tree USING GIN(search_vector);
CREATE INDEX IF NOT EXISTS idx_point_tags_point ON point_tags(point_id);
CREATE INDEX IF NOT EXISTS idx_point_tags_type ON point_tags(tag_type);
```

### 2. TypeScript ç±»å‹å®šä¹‰

```typescript
// æ ‡ç­¾ç±»å‹æšä¸¾
type TagType = 'high_frequency' | 'must_test' | 'easy_mistake' | 'basic' | 'reinforce'

// æ ‡ç­¾å®šä¹‰
const TAG_DEFINITIONS: Record<TagType, { label: string; color: string; definition: string }> = {
  high_frequency: { 
    label: 'é«˜é¢‘', 
    color: '#EF4444', 
    definition: 'è¿‡å»5å¹´è‡³å°‘è€ƒ3æ¬¡' 
  },
  must_test: { 
    label: 'å¿…è€ƒ', 
    color: '#F97316', 
    definition: 'æ•™ææ˜¾æ€§è¦æ±‚ + å†å¹´å¤šæ¬¡å‘½é¢˜' 
  },
  easy_mistake: { 
    label: 'æ˜“é”™', 
    color: '#EAB308', 
    definition: 'å­¦å‘˜åé¦ˆé”™è¯¯æ¦‚ç‡>40%' 
  },
  basic: { 
    label: 'åŸºç¡€', 
    color: '#3B82F6', 
    definition: 'æ¦‚å¿µã€å®šä¹‰ç±»åŸºç¡€çŸ¥è¯†' 
  },
  reinforce: { 
    label: 'å¼ºåŒ–', 
    color: '#8B5CF6', 
    definition: 'é€‚åˆå›¾ç¤ºã€æ€»ç»“ã€æ€ç»´å¯¼å›¾å¼ºåŒ–' 
  },
}

// å†…å®¹æ¨¡å—é¡ºåº
const CONTENT_MODULE_ORDER = [
  'summary',
  'core_memory_points',
  'mechanism',
  'clinical_application',
  'adverse_reactions',
  'contraindications',
  'drug_interactions',
  'mnemonics',
  'mind_map',
] as const
```


## Correctness Properties

*A property is a characteristic or behavior that should hold true across all valid executions of a system-essentially, a formal statement about what the system should do. Properties serve as the bridge between human-readable specifications and machine-verifiable correctness guarantees.*

### Property 1: ç« èŠ‚å¡ç‰‡æ•°æ®å®Œæ•´æ€§
*For any* ç« èŠ‚æ•°æ®ï¼Œæ¸²æŸ“çš„ç« èŠ‚å¡ç‰‡å¿…é¡»åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µï¼šæ ‡é¢˜ã€å°èŠ‚æ•°é‡ã€è€ƒç‚¹æ•°é‡ã€æŒæ¡åº¦ç™¾åˆ†æ¯”ã€‚
**Validates: Requirements 1.1**

### Property 2: URLè·¯ç”±æ­£ç¡®æ€§
*For any* ç« èŠ‚IDã€å°èŠ‚IDæˆ–è€ƒç‚¹IDï¼Œç”Ÿæˆçš„URLå¿…é¡»ç¬¦åˆé¢„å®šä¹‰æ ¼å¼ï¼š
- ç« èŠ‚é¡µ: `/knowledge/chapter/[chapterId]`
- å°èŠ‚é¡µ: `/knowledge/chapter/[chapterId]/section/[sectionId]`
- è€ƒç‚¹é¡µ: `/knowledge/point/[pointId]`
**Validates: Requirements 1.2, 1.4, 1.7**

### Property 3: è€ƒç‚¹å¡ç‰‡å†…å®¹é™åˆ¶
*For any* è€ƒç‚¹å¡ç‰‡ï¼Œæ¸²æŸ“ç»“æœå¿…é¡»ä»…åŒ…å«ï¼šæ ‡é¢˜ã€ä¼˜å…ˆçº§æ ‡ç­¾ã€ä¸€å¥è¯ç®€ä»‹ï¼ˆâ‰¤40å­—ï¼‰ã€å†å¹´è€ƒæŸ¥å¹´ä»½ï¼›ä¸”ç¦æ­¢åŒ…å«ï¼šå£è¯€ã€é€»è¾‘å›¾ã€ä¾‹é¢˜ã€å¤§æ®µæ–‡æœ¬ã€‚
**Validates: Requirements 1.6, 2.1, 2.2**

### Property 4: ä¸‰æ¬¡ç‚¹å‡»è§„åˆ™
*For any* è€ƒç‚¹ï¼Œä»é¦–é¡µåˆ°è¾¾è¯¥è€ƒç‚¹è¯¦æƒ…é¡µçš„æœ€çŸ­è·¯å¾„ä¸è¶…è¿‡3æ¬¡ç‚¹å‡»ï¼ˆé¦–é¡µâ†’ç« èŠ‚â†’å°èŠ‚â†’è€ƒç‚¹ï¼‰ã€‚
**Validates: Requirements 1.8**

### Property 5: é«˜é¢‘æ ‡ç­¾æ˜¾ç¤ºä¸€è‡´æ€§
*For any* è¢«æ ‡è®°ä¸ºé«˜é¢‘çš„è€ƒç‚¹ï¼ˆexam_frequency >= 3ï¼‰ï¼Œåœ¨è€ƒç‚¹å¡ç‰‡å’Œè€ƒç‚¹æ¢³ç†åŒºåŸŸå¿…é¡»æ˜¾ç¤ºçº¢è‰²"é«˜é¢‘"æ ‡ç­¾ã€‚
**Validates: Requirements 2.3, 4.2**

### Property 6: è¯¦æƒ…é¡µå†…å®¹æ¨¡å—é¡ºåº
*For any* è€ƒç‚¹è¯¦æƒ…é¡µï¼Œéç©ºå†…å®¹æ¨¡å—å¿…é¡»æŒ‰é¢„å®šä¹‰é¡ºåºå±•ç¤ºï¼šç®€ä»‹â†’æ ¸å¿ƒè®°å¿†ç‚¹â†’ä½œç”¨æœºåˆ¶â†’ä¸´åºŠåº”ç”¨â†’ä¸è‰¯ååº”â†’ç¦å¿Œâ†’è¯ç‰©ç›¸äº’ä½œç”¨â†’è®°å¿†å£è¯€â†’æ€ç»´å¯¼å›¾ã€‚
**Validates: Requirements 2.6**

### Property 7: ç©ºæ¨¡å—è·³è¿‡
*For any* è€ƒç‚¹è¯¦æƒ…é¡µï¼Œå¦‚æœæŸå†…å®¹æ¨¡å—ä¸ºç©ºï¼ˆnullæˆ–ç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œè¯¥æ¨¡å—ä¸åº”è¢«æ¸²æŸ“ã€‚
**Validates: Requirements 2.7**

### Property 8: æ ‡ç­¾é¢œè‰²æ˜ å°„æ­£ç¡®æ€§
*For any* è€ƒç‚¹æ ‡ç­¾ï¼Œå…¶æ˜¾ç¤ºé¢œè‰²å¿…é¡»ä¸æ ‡ç­¾ç±»å‹ä¸€ä¸€å¯¹åº”ï¼š
- high_frequency â†’ çº¢è‰² #EF4444
- must_test â†’ æ©™è‰² #F97316
- easy_mistake â†’ é»„è‰² #EAB308
- basic â†’ è“è‰² #3B82F6
- reinforce â†’ ç´«è‰² #8B5CF6
**Validates: Requirements 4.2, 4.3, 4.4, 4.5, 4.6**

### Property 9: æ ‡ç­¾ç­›é€‰æ­£ç¡®æ€§
*For any* è€ƒç‚¹åˆ—è¡¨å’Œæ ‡ç­¾ç­›é€‰æ¡ä»¶ï¼Œç­›é€‰åçš„ç»“æœå¿…é¡»ä»…åŒ…å«å…·æœ‰æŒ‡å®šæ ‡ç­¾çš„è€ƒç‚¹ï¼Œä¸”ä¸é—æ¼ä»»ä½•ç¬¦åˆæ¡ä»¶çš„è€ƒç‚¹ã€‚
**Validates: Requirements 4.7**

### Property 10: é¢åŒ…å±‘è·¯å¾„å®Œæ•´æ€§
*For any* éé¦–é¡µé¡µé¢ï¼Œé¢åŒ…å±‘å¯¼èˆªå¿…é¡»åŒ…å«ä»é¦–é¡µåˆ°å½“å‰é¡µé¢çš„å®Œæ•´è·¯å¾„ï¼Œä¸”æ¯ä¸ªå±‚çº§å¯ç‚¹å‡»è·³è½¬ã€‚
**Validates: Requirements 5.1, 5.2, 5.3**

### Property 11: å³ä¾§ç›®å½•é«˜äº®æ­£ç¡®æ€§
*For any* è€ƒç‚¹è¯¦æƒ…é¡µï¼Œå³ä¾§ç›®å½•ä¸­å½“å‰è€ƒç‚¹å¿…é¡»è¢«é«˜äº®æ˜¾ç¤ºï¼Œä¸”ç›®å½•åŒ…å«åŒå°èŠ‚æ‰€æœ‰è€ƒç‚¹ã€‚
**Validates: Requirements 5.4, 5.5, 5.6**

### Property 12: ä¸Šä¸‹å¯¼èˆªè¾¹ç•Œå¤„ç†
*For any* è€ƒç‚¹è¯¦æƒ…é¡µï¼š
- å¦‚æœæ˜¯å°èŠ‚ç¬¬ä¸€ä¸ªè€ƒç‚¹ï¼Œ"ä¸Šä¸€ä¸ªè€ƒç‚¹"æŒ‰é’®å¿…é¡»éšè—
- å¦‚æœæ˜¯å°èŠ‚æœ€åä¸€ä¸ªè€ƒç‚¹ï¼Œ"ä¸‹ä¸€ä¸ªè€ƒç‚¹"æŒ‰é’®å¿…é¡»éšè—
**Validates: Requirements 5.7, 5.8, 5.9**

### Property 13: è€ƒç‚¹æ¢³ç†ç»Ÿè®¡æ­£ç¡®æ€§
*For any* å°èŠ‚é¡µé¢çš„è€ƒç‚¹æ¢³ç†åŒºåŸŸï¼Œæ˜¾ç¤ºçš„ç»Ÿè®¡æ•°å­—ï¼ˆè€ƒç‚¹æ€»æ•°ã€é«˜é¢‘è€ƒç‚¹æ•°é‡ï¼‰å¿…é¡»ä¸å®é™…æ•°æ®ä¸€è‡´ã€‚
**Validates: Requirements 6.2**

### Property 14: è€ƒç‚¹æ¢³ç†åˆ—è¡¨å®Œæ•´æ€§
*For any* å°èŠ‚é¡µé¢çš„è€ƒç‚¹æ¢³ç†åŒºåŸŸï¼Œå¿…é¡»åˆ—å‡ºè¯¥å°èŠ‚æ‰€æœ‰è€ƒç‚¹çš„æ ‡é¢˜ï¼Œä¸é—æ¼ä»»ä½•è€ƒç‚¹ã€‚
**Validates: Requirements 6.3**

### Property 15: å›¾è°±èŠ‚ç‚¹é¢œè‰²åˆ†ç»„
*For any* å›¾è°±è§†å›¾ä¸­çš„èŠ‚ç‚¹ï¼ŒåŒä¸€ç« èŠ‚çš„æ‰€æœ‰èŠ‚ç‚¹å¿…é¡»ä½¿ç”¨ç›¸åŒçš„é¢œè‰²ã€‚
**Validates: Requirements 3.7**

### Property 16: å›¾è°±èŠ‚ç‚¹å¤§å°ä¸é‡è¦æ€§æ˜ å°„
*For any* å›¾è°±è§†å›¾ä¸­çš„è€ƒç‚¹èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å¤§å°æˆ–è¾¹æ¡†ç²—ç»†å¿…é¡»ä¸è€ƒç‚¹é‡è¦æ€§æˆæ­£æ¯”ã€‚
**Validates: Requirements 3.8**

### Property 17: æœç´¢ç»“æœç›¸å…³åº¦æ’åº
*For any* æœç´¢æŸ¥è¯¢ï¼Œè¿”å›çš„ç»“æœå¿…é¡»æŒ‰ç›¸å…³åº¦æ’åºï¼šæ ‡é¢˜å®Œå…¨åŒ¹é… > æ ‡é¢˜éƒ¨åˆ†åŒ¹é… > å†…å®¹åŒ¹é…ã€‚
**Validates: Requirements 9.5**

### Property 18: æœç´¢ç»“æœè·¯å¾„å®Œæ•´æ€§
*For any* æœç´¢ç»“æœï¼Œå¿…é¡»æ˜¾ç¤ºåŒ¹é…å†…å®¹æ‰€å±çš„å®Œæ•´è·¯å¾„ï¼ˆå¦‚"ç¬¬ä¸€ç«  > ç¬¬ä¸€èŠ‚ > è€ƒç‚¹1"ï¼‰ã€‚
**Validates: Requirements 9.7**

## Error Handling

### 1. APIé”™è¯¯å¤„ç†

```typescript
interface ErrorResponse {
  success: false
  error: {
    code: string
    message: string
  }
}

const ERROR_CODES = {
  CHAPTER_NOT_FOUND: 'CHAPTER_NOT_FOUND',
  SECTION_NOT_FOUND: 'SECTION_NOT_FOUND',
  POINT_NOT_FOUND: 'POINT_NOT_FOUND',
  INVALID_ID: 'INVALID_ID',
  SEARCH_ERROR: 'SEARCH_ERROR',
  DATABASE_ERROR: 'DATABASE_ERROR',
}
```

### 2. å‰ç«¯é”™è¯¯å¤„ç†

- **æ•°æ®åŠ è½½å¤±è´¥**: æ˜¾ç¤ºé‡è¯•æŒ‰é’®å’Œé”™è¯¯æç¤º
- **é¡µé¢ä¸å­˜åœ¨**: æ˜¾ç¤º404é¡µé¢ï¼Œæä¾›è¿”å›é¦–é¡µé“¾æ¥
- **æœç´¢æ— ç»“æœ**: æ˜¾ç¤º"æœªæ‰¾åˆ°ç›¸å…³å†…å®¹"æç¤ºå’Œæœç´¢å»ºè®®
- **ç½‘ç»œé”™è¯¯**: æ˜¾ç¤ºç¦»çº¿æç¤ºï¼Œæ”¯æŒç¼“å­˜æ•°æ®å±•ç¤º

## Testing Strategy

### 1. æµ‹è¯•æ¡†æ¶

- **å•å…ƒæµ‹è¯•**: Jest
- **å±æ€§æµ‹è¯•**: fast-check
- **ç»„ä»¶æµ‹è¯•**: React Testing Library
- **E2Eæµ‹è¯•**: Playwrightï¼ˆå¯é€‰ï¼‰

### 2. å±æ€§æµ‹è¯•ç­–ç•¥

æ¯ä¸ªæ­£ç¡®æ€§å±æ€§å¯¹åº”ä¸€ä¸ªå±æ€§æµ‹è¯•ï¼Œä½¿ç”¨ fast-check ç”Ÿæˆéšæœºæµ‹è¯•æ•°æ®ï¼š

```typescript
import fc from 'fast-check'

// Property 3: è€ƒç‚¹å¡ç‰‡å†…å®¹é™åˆ¶
describe('Property 3: Point Card Content Restriction', () => {
  it('point card should only contain allowed fields', () => {
    fc.assert(
      fc.property(
        pointSummaryArbitrary,
        (point) => {
          const rendered = renderPointCard(point)
          // éªŒè¯åŒ…å«å¿…éœ€å­—æ®µ
          expect(rendered).toContain(point.title)
          expect(rendered).toContain(point.key_takeaway)
          // éªŒè¯ç®€ä»‹é•¿åº¦
          expect(point.key_takeaway.length).toBeLessThanOrEqual(40)
          // éªŒè¯ä¸åŒ…å«ç¦æ­¢å†…å®¹
          expect(rendered).not.toContain(point.mnemonics)
          expect(rendered).not.toContain(point.mechanism)
          return true
        }
      ),
      { numRuns: 100 }
    )
  })
})

// Property 8: æ ‡ç­¾é¢œè‰²æ˜ å°„æ­£ç¡®æ€§
describe('Property 8: Tag Color Mapping', () => {
  it('tag color should match tag type', () => {
    fc.assert(
      fc.property(
        fc.constantFrom('high_frequency', 'must_test', 'easy_mistake', 'basic', 'reinforce'),
        (tagType) => {
          const color = getTagColor(tagType)
          const expectedColors = {
            high_frequency: '#EF4444',
            must_test: '#F97316',
            easy_mistake: '#EAB308',
            basic: '#3B82F6',
            reinforce: '#8B5CF6',
          }
          return color === expectedColors[tagType]
        }
      ),
      { numRuns: 100 }
    )
  })
})
```

### 3. æµ‹è¯•æ–‡ä»¶ç»“æ„

```
__tests__/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ChapterCard.test.tsx
â”‚   â”œâ”€â”€ SectionCard.test.tsx
â”‚   â”œâ”€â”€ PointCard.test.tsx
â”‚   â”œâ”€â”€ PointOverview.test.tsx
â”‚   â”œâ”€â”€ TagBadge.test.tsx
â”‚   â”œâ”€â”€ Breadcrumb.test.tsx
â”‚   â””â”€â”€ KnowledgeGraph.test.tsx
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ chapters.test.ts
â”‚   â”œâ”€â”€ sections.test.ts
â”‚   â”œâ”€â”€ points.test.ts
â”‚   â””â”€â”€ search.test.ts
â”œâ”€â”€ properties/
â”‚   â”œâ”€â”€ card-content.property.test.ts
â”‚   â”œâ”€â”€ url-routing.property.test.ts
â”‚   â”œâ”€â”€ tag-color.property.test.ts
â”‚   â”œâ”€â”€ navigation.property.test.ts
â”‚   â”œâ”€â”€ search.property.test.ts
â”‚   â””â”€â”€ three-click-rule.property.test.ts
â””â”€â”€ utils/
    â”œâ”€â”€ arbitraries.ts          # fast-check ç”Ÿæˆå™¨
    â””â”€â”€ test-helpers.ts
```
