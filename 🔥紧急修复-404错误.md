# ğŸ”¥ ç´§æ€¥ä¿®å¤ï¼šç”Ÿäº§ç¯å¢ƒ 404 é”™è¯¯

## ğŸš¨ é—®é¢˜æ¦‚è¿°

**åŸŸå**: https://yikaobiguo.com/  
**é”™è¯¯**: 404: NOT_FOUND  
**ä¸¥é‡ç¨‹åº¦**: ğŸ”´ é«˜ï¼ˆå½±å“æ‰€æœ‰ç”¨æˆ·ï¼‰

---

## âœ… æˆ‘å·²ä¿®å¤çš„é—®é¢˜

### ä¿®å¤ 1: vercel.json é…ç½®é”™è¯¯

**é—®é¢˜**ï¼š
```json
{
  "env": {
    "DATABASE_URL": "@database_url"  â† âŒ é”™è¯¯çš„è¯­æ³•ï¼
  }
}
```

**ä¿®å¤å**ï¼š
```json
{
  "framework": "nextjs",
  "buildCommand": "prisma generate && next build",
  "installCommand": "npm install"
}
```

**åŸå› **ï¼š
- `@database_url` ä¸æ˜¯æœ‰æ•ˆçš„ç¯å¢ƒå˜é‡å¼•ç”¨è¯­æ³•
- ç¯å¢ƒå˜é‡åº”è¯¥åœ¨ Vercel Dashboard ä¸­é…ç½®ï¼Œä¸æ˜¯åœ¨ vercel.json ä¸­
- è¿™ä¸ªé”™è¯¯é…ç½®å¯èƒ½å¯¼è‡´éƒ¨ç½²å¤±è´¥æˆ–è¿è¡Œæ—¶é”™è¯¯

### ä¿®å¤ 2: Prisma æ—¥å¿—é…ç½®ä¼˜åŒ–

**é—®é¢˜**ï¼šç”Ÿäº§ç¯å¢ƒæ‰“å°è¿‡å¤šæ—¥å¿—ï¼Œå½±å“æ€§èƒ½

**ä¿®å¤**ï¼š
```typescript
// å¼€å‘ç¯å¢ƒï¼šè¯¦ç»†æ—¥å¿—
// ç”Ÿäº§ç¯å¢ƒï¼šä»…é”™è¯¯æ—¥å¿—
log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error']
```

---

## âš¡ ç«‹å³æ‰§è¡Œçš„å…³é”®æ­¥éª¤

### ğŸ”¥ ç¬¬ 1 æ­¥ï¼šæ¨é€ä¿®å¤åˆ° GitHubï¼ˆç«‹å³ï¼ï¼‰

ä¿®å¤å·²å®Œæˆï¼Œéœ€è¦æ¨é€ï¼š

```bash
git add vercel.json lib/prisma.ts
git commit -m "fix: ä¿®å¤ vercel.json ç¯å¢ƒå˜é‡é…ç½®å’Œ Prisma æ—¥å¿—"
git push origin main
```

**æˆ–ä½¿ç”¨è„šæœ¬**ï¼š
```
è¿è¡Œï¼šä¿®å¤éƒ¨ç½²å¹¶æ¨é€.bat
```

### ğŸ”§ ç¬¬ 2 æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¿…é¡»ï¼ï¼‰

#### åœ¨ Vercel Dashboard ä¸­ï¼š

1. **è®¿é—®**: https://vercel.com/dashboard
2. **è¿›å…¥**: é¡¹ç›® â†’ Settings â†’ Environment Variables
3. **æ·»åŠ å˜é‡**:

```
Name: DATABASE_URL

Value: postgresql://postgres:yZaNnwx8VfkVRVkk@db.rekdretiemtoofrvcils.supabase.co:5432/postgres

Environments: 
â˜‘ Production    â† å¿…é¡»å‹¾é€‰ï¼
â˜‘ Preview
â˜‘ Development
```

4. **ç‚¹å‡» Save**

âš ï¸ **æ³¨æ„**: å¦‚æœ DATABASE_URL å·²å­˜åœ¨ä½† Production æœªå‹¾é€‰ï¼Œå¿…é¡»ç¼–è¾‘å®ƒå¹¶å‹¾é€‰ Productionï¼

---

### ğŸ”„ ç¬¬ 3 æ­¥ï¼šè§¦å‘é‡æ–°éƒ¨ç½²

æ¨é€ä»£ç åï¼ŒVercel ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚æˆ–æ‰‹åŠ¨è§¦å‘ï¼š

1. **Deployments** æ ‡ç­¾
2. ç‚¹å‡» **Redeploy** æŒ‰é’®
3. **å–æ¶ˆå‹¾é€‰** "Use existing Build Cache"
4. ç‚¹å‡» **Redeploy**

---

## ğŸ“Š è¯Šæ–­æ£€æŸ¥æ¸…å•

### æ£€æŸ¥ 1: Vercel éƒ¨ç½²çŠ¶æ€

```
Deployments â†’ æœ€æ–° Production éƒ¨ç½²

âœ… çŠ¶æ€: Ready (ç»¿è‰²)
âœ… Commit: c398e17 æˆ–æ›´æ–°
âœ… æ„å»ºæ—¥å¿—æ— é”™è¯¯
```

### æ£€æŸ¥ 2: ç¯å¢ƒå˜é‡é…ç½®

```
Settings â†’ Environment Variables

âœ… DATABASE_URL å­˜åœ¨
âœ… Production å·²å‹¾é€‰
âœ… å€¼æ­£ç¡®æ— è¯¯
```

### æ£€æŸ¥ 3: æ„å»ºè¾“å‡º

```
Build Logs åº”åŒ…å«ï¼š

âœ“ Compiled successfully
âœ“ Generating static pages (9/9)
âœ“ Build Completed

Route (app)                              Size     First Load JS
â”Œ â—‹ /                                    175 B          93.8 kB  â† å¿…é¡»æœ‰è¿™è¡Œï¼
â”œ â—‹ /exams                               ...
â”œ â—‹ /practice                            ...
```

### æ£€æŸ¥ 4: åŸŸåé…ç½®

```
Settings â†’ Domains

yikaobiguo.com
çŠ¶æ€: âœ… Valid Configuration
```

---

## ğŸ” è¯¦ç»†æ•…éšœæ’æŸ¥

### é—®é¢˜ A: éƒ¨ç½²å¤±è´¥ï¼ˆBuild Failedï¼‰

**ç—‡çŠ¶**: Deployments æ˜¾ç¤º Failed çŠ¶æ€

**æŸ¥çœ‹**: Build Logs ä¸­çš„é”™è¯¯ä¿¡æ¯

**å¸¸è§é”™è¯¯**:

1. **Prisma é”™è¯¯**
   ```
   Error: Can't reach database server
   ```
   **è§£å†³**: æ£€æŸ¥ DATABASE_URL æ˜¯å¦é…ç½®

2. **TypeScript é”™è¯¯**
   ```
   Type error: ...
   ```
   **è§£å†³**: æŸ¥çœ‹å…·ä½“é”™è¯¯ï¼Œä¿®å¤ä»£ç 

3. **ä¾èµ–å®‰è£…é”™è¯¯**
   ```
   npm ERR! ...
   ```
   **è§£å†³**: æ£€æŸ¥ package.json ä¾èµ–ç‰ˆæœ¬

---

### é—®é¢˜ B: éƒ¨ç½²æˆåŠŸä½† 404

**ç—‡çŠ¶**: Build Completed ä½†è®¿é—®ç½‘ç«™æ˜¾ç¤º 404

**å¯èƒ½åŸå› **:

1. **ç¯å¢ƒå˜é‡æœªé…ç½®**
   ```
   æ£€æŸ¥: DATABASE_URL çš„ Production æ˜¯å¦å‹¾é€‰
   è§£å†³: å‹¾é€‰å¹¶é‡æ–°éƒ¨ç½²
   ```

2. **è·¯ç”±æ²¡æœ‰ç”Ÿæˆ**
   ```
   æ£€æŸ¥: Build Logs ä¸­æ˜¯å¦æœ‰ "Route (app)" éƒ¨åˆ†
   ç¡®è®¤: â—‹ / è·¯ç”±æ˜¯å¦å­˜åœ¨
   ```

3. **è¿è¡Œæ—¶é”™è¯¯**
   ```
   æ£€æŸ¥: Function Logs ä¸­çš„é”™è¯¯
   æŸ¥çœ‹: Vercel Dashboard â†’ Deployments â†’ Function Logs
   ```

---

### é—®é¢˜ C: åŸŸåé…ç½®é—®é¢˜

**ç—‡çŠ¶**: Vercel URL å¯è®¿é—®ï¼Œè‡ªå®šä¹‰åŸŸå 404

**æ£€æŸ¥æ­¥éª¤**:

1. **DNS é…ç½®**
   ```bash
   # ä½¿ç”¨ nslookup æ£€æŸ¥ DNS
   nslookup yikaobiguo.com
   
   # åº”è¯¥æŒ‡å‘ Vercel çš„ IP æˆ– CNAME
   ```

2. **Vercel åŸŸåçŠ¶æ€**
   ```
   Settings â†’ Domains â†’ yikaobiguo.com
   çŠ¶æ€åº”è¯¥æ˜¯ "Valid Configuration"
   ```

3. **DNS ä¼ æ’­**
   ```
   å¦‚æœåˆšé…ç½®åŸŸåï¼Œå¯èƒ½éœ€è¦ç­‰å¾… DNS ä¼ æ’­
   æ—¶é—´: å‡ åˆ†é’Ÿåˆ° 48 å°æ—¶ä¸ç­‰
   ```

---

## ğŸ› ï¸ ç´§æ€¥ä¿®å¤è„šæœ¬

### æ–¹æ³• 1: å®Œå…¨é‡æ–°éƒ¨ç½²

```bash
# 1. åˆ é™¤æ—§çš„æ„å»ºç¼“å­˜
Vercel Dashboard â†’ Deployments â†’ Redeploy (ä¸ä½¿ç”¨ç¼“å­˜)

# 2. æˆ–è€…ç©ºæäº¤è§¦å‘æ–°éƒ¨ç½²
git commit --allow-empty -m "chore: trigger clean redeploy"
git push origin main
```

### æ–¹æ³• 2: å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬

å¦‚æœæ–°éƒ¨ç½²æœ‰é—®é¢˜ï¼š

```
Deployments â†’ æ‰¾åˆ°ä¹‹å‰æˆåŠŸçš„éƒ¨ç½² â†’ Promote to Production
```

---

## ğŸ“‹ å®Œæ•´æ“ä½œæµç¨‹

### ç¬¬ 1 æ­¥ï¼šæ¨é€ä¿®å¤ï¼ˆ1 åˆ†é’Ÿï¼‰

```bash
# æŸ¥çœ‹ä¿®æ”¹
git status

# æäº¤ä¿®å¤
git add vercel.json lib/prisma.ts
git commit -m "fix: ä¿®å¤ vercel.json å’Œ Prisma é…ç½®"

# æ¨é€
git push origin main
```

### ç¬¬ 2 æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡ï¼ˆ3 åˆ†é’Ÿï¼‰

1. ç™»å½• Vercel Dashboard
2. Settings â†’ Environment Variables
3. ç¡®ä¿ DATABASE_URL é…ç½®æ­£ç¡®
4. âœ… Production å¿…é¡»å‹¾é€‰

### ç¬¬ 3 æ­¥ï¼šç­‰å¾…éƒ¨ç½²ï¼ˆ1-2 åˆ†é’Ÿï¼‰

1. Deployments æ ‡ç­¾
2. æŸ¥çœ‹æœ€æ–°éƒ¨ç½²è¿›åº¦
3. çŠ¶æ€å˜ä¸º Ready

### ç¬¬ 4 æ­¥ï¼šæµ‹è¯•ç½‘ç«™ï¼ˆ1 åˆ†é’Ÿï¼‰

è®¿é—®æ‰€æœ‰ URLï¼š
```
âœ… https://yikaobiguo.com/
âœ… https://yikaobiguo.com/practice
âœ… https://yikaobiguo.com/exams
âœ… https://yikaobiguo.com/api/questions
```

---

## ğŸ¯ é¢„æœŸç»“æœ

### æˆåŠŸæ ‡å¿—

**éƒ¨ç½²æ—¥å¿—**:
```
âœ“ Cloning github.com/caimi124/tiku (Commit: [æœ€æ–°commit])
âœ“ Installing dependencies
âœ“ Running prisma generate
âœ“ Compiled successfully
âœ“ Generating static pages (9/9)
âœ“ Build Completed
âœ“ Deployment Ready
```

**è®¿é—®ç½‘ç«™**:
```
https://yikaobiguo.com/ â†’ æ˜¾ç¤ºé¦–é¡µ
https://yikaobiguo.com/practice â†’ æ˜¾ç¤ºç»ƒä¹ é¡µé¢
https://yikaobiguo.com/api/questions â†’ è¿”å› JSON æ•°æ®
```

---

## ğŸ†˜ å¦‚æœä»ç„¶ 404

### æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. âœ… **éƒ¨ç½²çŠ¶æ€æˆªå›¾**
   - Vercel Deployments é¡µé¢
   - æœ€æ–° Production éƒ¨ç½²çš„çŠ¶æ€

2. âœ… **Build Logs**
   - å®Œæ•´çš„æ„å»ºæ—¥å¿—
   - ç‰¹åˆ«æ˜¯æœ€å 50 è¡Œ

3. âœ… **Function Logs**
   - è¿è¡Œæ—¶é”™è¯¯æ—¥å¿—
   - è®¿é—®é¡µé¢æ—¶çš„å®æ—¶æ—¥å¿—

4. âœ… **ç¯å¢ƒå˜é‡æˆªå›¾**
   - Settings â†’ Environment Variables
   - DATABASE_URL çš„é…ç½®ï¼ˆå€¼å¯ä»¥æ‰“ç ï¼‰

5. âœ… **åŸŸåé…ç½®æˆªå›¾**
   - Settings â†’ Domains
   - yikaobiguo.com çš„çŠ¶æ€

---

## ğŸ’¡ å…³é”®è¦ç‚¹

1. **vercel.json ä¸åº”åŒ…å« env å­—æ®µ**
   - ç¯å¢ƒå˜é‡å¿…é¡»åœ¨ Vercel Dashboard é…ç½®
   - `@database_url` è¯­æ³•æ˜¯é”™è¯¯çš„

2. **DATABASE_URL å¿…é¡»é…ç½®åˆ° Production**
   - å³ä½¿é…ç½®äº†ï¼Œå¦‚æœ Production æœªå‹¾é€‰ä¹Ÿä¼šå¤±è´¥
   - ä¿å­˜åå¿…é¡»é‡æ–°éƒ¨ç½²

3. **éƒ¨ç½²æˆåŠŸ â‰  ç½‘ç«™å¯è®¿é—®**
   - æ„å»ºå¯èƒ½æˆåŠŸï¼Œä½†è¿è¡Œæ—¶å¯èƒ½å¤±è´¥
   - éœ€è¦æ£€æŸ¥ Function Logs æŸ¥çœ‹è¿è¡Œæ—¶é”™è¯¯

4. **åŸŸåéœ€è¦æ—¶é—´ç”Ÿæ•ˆ**
   - DNS ä¼ æ’­å¯èƒ½éœ€è¦æ—¶é—´
   - å…ˆæµ‹è¯• Vercel é»˜è®¤ URLï¼ˆtiku.vercel.appï¼‰

---

## â±ï¸ é¢„è®¡ä¿®å¤æ—¶é—´

```
æ¨é€ä»£ç :      1 åˆ†é’Ÿ
é…ç½®ç¯å¢ƒå˜é‡:  3 åˆ†é’Ÿ
ç­‰å¾…éƒ¨ç½²:      1-2 åˆ†é’Ÿ
DNS ä¼ æ’­:      0-30 åˆ†é’Ÿï¼ˆå¦‚æœæ˜¯åŸŸåé—®é¢˜ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:         5-36 åˆ†é’Ÿ
```

---

**ç«‹å³è¡ŒåŠ¨ï¼š**

1. âœ… æ¨é€ä»£ç ä¿®å¤
2. âœ… é…ç½® DATABASE_URL ç¯å¢ƒå˜é‡ï¼ˆå‹¾é€‰ Productionï¼‰
3. âœ… ç­‰å¾…éƒ¨ç½²å®Œæˆ
4. âœ… æµ‹è¯• https://yikaobiguo.com/

**å¦‚æœ 5 åˆ†é’Ÿåä»ç„¶ 404ï¼Œè¯·æä¾›ä¸Šè¿°è¯Šæ–­ä¿¡æ¯ï¼** ğŸš€

