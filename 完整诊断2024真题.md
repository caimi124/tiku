# 🔍 2024年执业药师中药综合真题完整诊断报告

## 📋 问题清单

### 问题1：题目数量不符
- **应有题目**: 120道
- **实际题目**: 117道  
- **缺失数量**: 3道题

### 问题2：题型未分类排序
- 题目类型混乱，没有按照标准题型顺序排列
- 应该按照：最佳选择题 → 配伍选择题 → 综合分析题 → 多项选择题

---

## 🎯 标准题型结构

根据执业药师考试标准，2024年中药学综合知识与技能真题应该是：

```
一、最佳选择题     第1-40题    (40道)
二、配伍选择题     第41-90题   (50道)  
三、综合分析题     第91-110题  (20道)
四、多项选择题     第111-120题 (10道)
─────────────────────────────────
总计：120道题
```

---

## 📂 原始数据源文件

请检查以下文件，找到完整的120道题原始数据：

1. **e:\tiku\prisma\import-2024-zhongyao-all-120.ts**  
   - ⚠️ 只包含5道示例题，不完整
   
2. **e:\tiku\prisma\import-2024-zhongyao-120-questions.ts**  
   - 需要检查是否完整

3. **e:\tiku\导入2024年中药综合真题-完整120题.sql**  
   - ⚠️ 只包含20条INSERT语句，不完整
   
4. **e:\tiku\导入2024中药综合120题-完整版.sql**  
   - ⚠️ 文件为空

5. **您可能有的其他文件：**
   - Excel文件
   - Word文档
   - 其他数据库导出文件

---

## 🔧 解决方案

### 方案A：找到完整原始数据（推荐）

**步骤：**

1. **找到完整的120道题数据源**
   - 检查您的备份文件
   - 查找原始Excel/Word文档
   - 或从其他题库网站导出

2. **准备完整数据**
   ```typescript
   // 格式应该是：
   const allQuestions = [
     // 1-40: 最佳选择题
     { questionType: 'single', content: '...', ... },
     
     // 41-90: 配伍选择题  
     { questionType: 'match', content: '...', ... },
     
     // 91-110: 综合分析题
     { questionType: 'comprehensive', content: '...', ... },
     
     // 111-120: 多项选择题
     { questionType: 'multiple', content: '...', ... },
   ];
   ```

3. **清空现有数据**
   ```sql
   DELETE FROM questions 
   WHERE exam_type = '执业药师' 
     AND subject = '中药学综合知识与技能' 
     AND source_year = 2024;
   ```

4. **重新导入完整120道题**

---

### 方案B：补充缺失的3道题

**步骤：**

1. **对比现有117道题和原始120道题**
   - 找出缺失的3道题是哪几道
   - 确认题号和题型

2. **手动添加缺失的3道题**
   ```typescript
   // 示例：
   await prisma.questions.create({
     data: {
       exam_type: '执业药师',
       subject: '中药学综合知识与技能',
       question_type: 'single', // 或 match, comprehensive, multiple
       content: '题目内容',
       options: [{key:'A',value:'选项A'}, ...],
       correct_answer: 'A',
       explanation: '解析内容',
       difficulty: 2,
       knowledge_points: ['知识点1'],
       source_type: '历年真题',
       source_year: 2024,
       is_published: true,
     }
   });
   ```

3. **验证总数**
   ```sql
   SELECT COUNT(*) FROM questions 
   WHERE exam_type = '执业药师' 
     AND subject = '中药学综合知识与技能' 
     AND source_year = 2024;
   ```

---

### 方案C：重新整理现有117道题

如果原始数据找不到，可以：

1. **调整题型比例**
   - 将现有117道题重新分配题型
   - 保持大致比例：最佳40% + 配伍42% + 综合17% + 多项1%

2. **重新排序**
   ```sql
   -- 1. 给每道题添加序号字段
   ALTER TABLE questions ADD COLUMN display_order INTEGER;
   
   -- 2. 按题型排序并赋值序号
   -- 最佳选择题: 1-40
   -- 配伍选择题: 41-90
   -- 综合分析题: 91-110  
   -- 多项选择题: 111-117 (原本应该是111-120)
   ```

---

## 💡 诊断工具

### 工具1：查看数据库实际情况

访问Supabase控制台：
```
https://supabase.com/dashboard/project/tparjdkxxtnentsdazfw
```

运行SQL查询：
```sql
-- 1. 统计总数
SELECT COUNT(*) as total FROM questions 
WHERE exam_type = '执业药师' 
  AND subject = '中药学综合知识与技能' 
  AND source_year = 2024;

-- 2. 按题型分组统计
SELECT 
  question_type,
  COUNT(*) as count
FROM questions 
WHERE exam_type = '执业药师' 
  AND subject = '中药学综合知识与技能' 
  AND source_year = 2024
GROUP BY question_type
ORDER BY question_type;

-- 3. 查看所有题目内容（前50字符）
SELECT 
  id,
  question_type,
  LEFT(content, 50) as content_preview,
  created_at
FROM questions 
WHERE exam_type = '执业药师' 
  AND subject = '中药学综合知识与技能' 
  AND source_year = 2024
ORDER BY created_at ASC;
```

### 工具2：检查重复题目

```sql
SELECT 
  content,
  COUNT(*) as duplicate_count
FROM questions 
WHERE exam_type = '执业药师' 
  AND subject = '中药学综合知识与技能' 
  AND source_year = 2024
GROUP BY content
HAVING COUNT(*) > 1;
```

### 工具3：检查测试数据

```sql
SELECT * FROM questions 
WHERE exam_type = '执业药师' 
  AND subject = '中药学综合知识与技能' 
  AND source_year = 2024
  AND (
    content LIKE '%请将您的完整题目%'
    OR content LIKE '%保持原始格式%'
    OR content = '题目内容'
  );
```

---

## 🚀 执行计划

### 立即执行（推荐）：

1. **访问Supabase SQL编辑器**
   ```
   https://supabase.com/dashboard/project/tparjdkxxtnentsdazfw/sql
   ```

2. **运行诊断SQL**（见上方"诊断工具"）

3. **截图分享结果**
   - 总题目数
   - 各题型分布
   - 前10道题预览

4. **提供完整数据源**
   - 如果有Excel/Word原始文件，请分享
   - 或粘贴完整的120道题数据

5. **我将为您生成完整导入脚本**

---

## 📞 下一步

**请您执行以下操作：**

1. ✅ 访问Supabase，运行诊断SQL
2. ✅ 找到完整的120道题原始数据文件
3. ✅ 将结果截图或数据粘贴给我
4. ✅ 我将为您生成完整的修复方案

---

**生成时间**: 2025-11-20  
**诊断目标**: 2024年执业药师中药学综合知识与技能真题  
**预期结果**: 120道题，按题型正确分类排序
