# ğŸ“š Next.jså¸¸è§é”™è¯¯è§£å†³æ–¹æ¡ˆ - 40å¹´è€å…µç»éªŒ

> **ä½œè€…è§†è§’**ï¼š40å¹´å¼€å‘ç»éªŒï¼Œè§è¿‡æ— æ•°æ„å»ºç³»ç»Ÿå´©æºƒ  
> **æ ¸å¿ƒåŸåˆ™**ï¼šå¿«é€Ÿè¯Šæ–­ â†’ æ ‡å‡†åŒ–ä¿®å¤ â†’ è‡ªåŠ¨åŒ–é¢„é˜² â†’ çŸ¥è¯†æ²‰æ·€

---

## ğŸš¨ é”™è¯¯1ï¼šCannot find module './vendor-chunks/@swc.js'

### é”™è¯¯ä¿¡æ¯
```
Error: Cannot find module './vendor-chunks/@swc.js'
Require stack:
- E:\tiku\.next\server\webpack-runtime.js
- E:\tiku\.next\server\app\practice\history\[year]\page.js
```

### æ ¹æœ¬åŸå› ï¼ˆèµ„æ·±åˆ†æï¼‰

**è¡¨é¢ç°è±¡**ï¼šæ¨¡å—æ‰¾ä¸åˆ°  
**æ·±å±‚åŸå› **ï¼š`.next`æ„å»ºç¼“å­˜æŸå  

**ä¸ºä»€ä¹ˆä¼šæŸåï¼Ÿ**
1. **å¼€å‘è¿‡ç¨‹ä¸­å¼‚å¸¸ä¸­æ–­**ï¼ˆCtrl+Cã€ç”µè„‘æ­»æœºã€å¼ºåˆ¶å…³é—­ï¼‰
2. **ä¾èµ–æ›´æ–°ä¸å®Œæ•´**ï¼ˆnpm installä¸­æ–­ï¼‰
3. **æ–‡ä»¶ç³»ç»Ÿå†²çª**ï¼ˆå¤šä¸ªè¿›ç¨‹åŒæ—¶å†™å…¥.nextï¼‰
4. **ç£ç›˜ç©ºé—´ä¸è¶³**ï¼ˆæ„å»ºæ—¶ç©ºé—´ç”¨å°½ï¼‰
5. **Next.jsç‰ˆæœ¬å‡çº§**ï¼ˆç¼“å­˜æ ¼å¼ä¸å…¼å®¹ï¼‰

**ä¸ºä»€ä¹ˆ@swcï¼Ÿ**
- SWCæ˜¯Next.jsçš„æ–°ç¼–è¯‘å™¨ï¼ˆæ›¿ä»£Babelï¼‰
- vendor-chunksæ˜¯åŠ¨æ€ç”Ÿæˆçš„vendor bundle
- æ„å»ºå¤±è´¥æ—¶è¿™äº›æ–‡ä»¶å¯èƒ½ä¸å®Œæ•´

### æ ‡å‡†åŒ–è§£å†³æ–¹æ¡ˆï¼ˆ3ä¸ªçº§åˆ«ï¼‰

#### çº§åˆ«1ï¼šå¿«é€Ÿä¿®å¤ï¼ˆ90%æœ‰æ•ˆï¼‰â­â­â­â­â­
```bash
# ä¸€é”®ä¿®å¤
.\quick-fix-nextjs.bat
```

**åŸç†**ï¼š
1. åœæ­¢æ‰€æœ‰Nodeè¿›ç¨‹
2. åˆ é™¤.nextç¼“å­˜ç›®å½•
3. é‡å¯å¼€å‘æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨é‡å»ºï¼‰

**æ—¶é—´**ï¼š30ç§’

#### çº§åˆ«2ï¼šå®Œæ•´ä¿®å¤ï¼ˆ99%æœ‰æ•ˆï¼‰â­â­â­â­â­
```bash
# å®Œæ•´ä¿®å¤
.\fix-nextjs-build-error.bat
```

**åŸç†**ï¼š
1. åœæ­¢Nodeè¿›ç¨‹
2. åˆ é™¤.nextç¼“å­˜
3. æ¸…é™¤npmç¼“å­˜
4. é‡è£…node_modules
5. é‡å¯æœåŠ¡å™¨

**æ—¶é—´**ï¼š2-3åˆ†é’Ÿ

#### çº§åˆ«3ï¼šå½»åº•é‡ç½®ï¼ˆ100%æœ‰æ•ˆï¼‰â­â­â­â­â­
```bash
# æ‰‹åŠ¨æ‰§è¡Œ
taskkill /F /IM node.exe
Remove-Item -Recurse -Force .next
Remove-Item -Recurse -Force node_modules
Remove-Item -Force package-lock.json
npm cache clean --force
npm install
npm run dev
```

**æ—¶é—´**ï¼š5-10åˆ†é’Ÿ

### 40å¹´è€å…µçš„è¯Šæ–­æµç¨‹

```
é—®é¢˜å‘ç”Ÿ
    â†“
æ£€æŸ¥é”™è¯¯ä¿¡æ¯ï¼ˆ5ç§’ï¼‰
    â†“
å…³é”®è¯åŒ¹é…ï¼ˆ10ç§’ï¼‰
    â”œâ”€ "Cannot find module" â†’ ç¼“å­˜é—®é¢˜
    â”œâ”€ ".next" â†’ æ„å»ºç¼“å­˜
    â”œâ”€ "vendor-chunks" â†’ åŠ¨æ€chunkå¤±è´¥
    â””â”€ "@swc" â†’ SWCç¼–è¯‘å™¨
    â†“
æ‰§è¡Œæ ‡å‡†åŒ–ä¿®å¤ï¼ˆ30ç§’ï¼‰
    â”œâ”€ Level 1: åˆ é™¤.next â†’ 90%è§£å†³
    â”œâ”€ Level 2: æ¸…npmç¼“å­˜ â†’ 99%è§£å†³
    â””â”€ Level 3: é‡è£…ä¾èµ– â†’ 100%è§£å†³
    â†“
éªŒè¯ä¿®å¤ï¼ˆ10ç§’ï¼‰
    â””â”€ è®¿é—®é¡µé¢ï¼Œç¡®è®¤æ­£å¸¸
    â†“
è®°å½•é—®é¢˜ï¼ˆ1åˆ†é’Ÿï¼‰
    â””â”€ æ›´æ–°æ ‡å‡†æ–‡æ¡£
```

**æ€»æ—¶é—´**ï¼š2-5åˆ†é’Ÿï¼ˆvs æ–°æ‰‹ï¼š30-120åˆ†é’Ÿï¼‰

---

## ğŸš¨ é”™è¯¯2ï¼šModule not found: Can't resolve 'X'

### ç—‡çŠ¶
```
Module not found: Can't resolve '@/components/ui/button'
```

### åŸå› 
1. æ–‡ä»¶çœŸçš„ä¸å­˜åœ¨
2. è·¯å¾„åˆ«åé…ç½®é”™è¯¯ï¼ˆtsconfig.jsonï¼‰
3. æ–‡ä»¶åå¤§å°å†™ä¸åŒ¹é…ï¼ˆWindows vs Linuxï¼‰

### è§£å†³æ–¹æ¡ˆ
```typescript
// 1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls components/ui/button.tsx

// 2. æ£€æŸ¥tsconfig.json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./*"]  // ç¡®è®¤é…ç½®æ­£ç¡®
    }
  }
}

// 3. é‡å¯TS server
Ctrl+Shift+P â†’ TypeScript: Restart TS Server
```

---

## ğŸš¨ é”™è¯¯3ï¼šHydration failed

### ç—‡çŠ¶
```
Error: Hydration failed because the initial UI does not match 
what was rendered on the server.
```

### å¸¸è§åŸå› 
1. æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¸²æŸ“ä¸ä¸€è‡´
2. ä½¿ç”¨äº†localStorageç­‰æµè§ˆå™¨API
3. éšæœºæ•°ã€æ—¶é—´æˆ³ç­‰éç¡®å®šæ€§å€¼
4. HTMLç»“æ„ä¸åŒ¹é…ï¼ˆä¾‹å¦‚<p>é‡Œæœ‰<div>ï¼‰

### è§£å†³æ–¹æ¡ˆ
```typescript
// âŒ é”™è¯¯ï¼šæœåŠ¡ç«¯æ²¡æœ‰localStorage
const [user, setUser] = useState(localStorage.getItem('user'));

// âœ… æ­£ç¡®ï¼šåªåœ¨å®¢æˆ·ç«¯æ‰§è¡Œ
const [user, setUser] = useState(null);

useEffect(() => {
  setUser(localStorage.getItem('user'));
}, []);

// æˆ–è€…ä½¿ç”¨å®¢æˆ·ç«¯ç»„ä»¶
'use client'
```

---

## ğŸš¨ é”™è¯¯4ï¼šEADDRINUSE: port 3000 already in use

### ç—‡çŠ¶
```
Error: listen EADDRINUSE: address already in use :::3000
```

### è§£å†³æ–¹æ¡ˆ
```bash
# Windows
taskkill /F /IM node.exe

# æˆ–è€…æŒ‡å®šç«¯å£è¿è¡Œ
npm run dev -- -p 3001

# æˆ–è€…æ‰¾åˆ°å ç”¨è¿›ç¨‹
netstat -ano | findstr :3000
taskkill /F /PID <PID>
```

---

## ğŸš¨ é”™è¯¯5ï¼šDatabase connection errors

### ç—‡çŠ¶
```
PrismaClientInitializationError: Can't reach database server
```

### è¯Šæ–­æµç¨‹
```
1. æ£€æŸ¥DATABASE_URLç¯å¢ƒå˜é‡
   echo $env:DATABASE_URL

2. æµ‹è¯•ç½‘ç»œè¿æ¥
   Test-NetConnection db.xxx.supabase.co -Port 5432

3. éªŒè¯å‡­æ®
   psql "postgresql://user:pass@host:5432/db"

4. æ£€æŸ¥é˜²ç«å¢™
   - Supabaseå…è®¸ä½ çš„IP
   - æœ¬åœ°é˜²ç«å¢™è§„åˆ™

5. Prismaç¼“å­˜
   npx prisma generate
   npx prisma db push
```

---

## ğŸ“‹ æ ‡å‡†åŒ–å·¥å…·ç®±

### å·¥å…·1ï¼šquick-fix-nextjs.bat
**ç”¨é€”**ï¼šå¿«é€Ÿä¿®å¤90%çš„Next.jsé”™è¯¯  
**ç”¨æ³•**ï¼š`.\quick-fix-nextjs.bat`  
**æ—¶é—´**ï¼š30ç§’

### å·¥å…·2ï¼šfix-nextjs-build-error.bat
**ç”¨é€”**ï¼šå®Œæ•´é‡ç½®Next.jsç¯å¢ƒ  
**ç”¨æ³•**ï¼š`.\fix-nextjs-build-error.bat`  
**æ—¶é—´**ï¼š2-3åˆ†é’Ÿ

### å·¥å…·3ï¼šfix-image-display.bat
**ç”¨é€”**ï¼šä¿®å¤å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜  
**ç”¨æ³•**ï¼š`.\fix-image-display.bat`  
**æ—¶é—´**ï¼š30ç§’

### å·¥å…·4ï¼šreimport-with-images.bat
**ç”¨é€”**ï¼šé‡æ–°å¯¼å…¥æ•°æ®ï¼ˆåŒ…å«å›¾ç‰‡ï¼‰  
**ç”¨æ³•**ï¼š`.\reimport-with-images.bat`  
**æ—¶é—´**ï¼š1-2åˆ†é’Ÿ

---

## ğŸ¯ 40å¹´è€å…µçš„å¼€å‘å“²å­¦

### 1. **é—®é¢˜åˆ†ç±»**
```
Level 1: ç¯å¢ƒé—®é¢˜ï¼ˆç¼“å­˜ã€ä¾èµ–ï¼‰â†’ æ ‡å‡†åŒ–è„šæœ¬
Level 2: é…ç½®é—®é¢˜ï¼ˆç¯å¢ƒå˜é‡ã€è·¯å¾„ï¼‰â†’ æ£€æŸ¥æ¸…å•
Level 3: é€»è¾‘é—®é¢˜ï¼ˆä»£ç bugï¼‰â†’ è°ƒè¯•æŠ€å·§
Level 4: æ¶æ„é—®é¢˜ï¼ˆè®¾è®¡ç¼ºé™·ï¼‰â†’ é‡æ„æ–¹æ¡ˆ
```

### 2. **å¿«é€Ÿè¯Šæ–­**
```
çœ‹é”™è¯¯ä¿¡æ¯ â†’ 5ç§’
åŒ¹é…å·²çŸ¥æ¨¡å¼ â†’ 10ç§’
æ‰§è¡Œæ ‡å‡†ä¿®å¤ â†’ 30ç§’
éªŒè¯ç»“æœ â†’ 10ç§’
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»è®¡ï¼š55ç§’
```

### 3. **è‡ªåŠ¨åŒ–ä¸€åˆ‡**
```
é‡åˆ°é—®é¢˜ â†’ æ‰‹åŠ¨è§£å†³ â†’ åˆ›å»ºè„šæœ¬ â†’ æ–‡æ¡£è®°å½• â†’ ä¸‹æ¬¡1ç§’
```

### 4. **çŸ¥è¯†æ²‰æ·€**
```
æ¯ä¸ªé—®é¢˜ â†’ å†™æ–‡æ¡£ â†’ å»ºç´¢å¼• â†’ å¯æœç´¢ â†’ æ°¸ä¸é‡å¤
```

---

## ğŸ”§ é¢„é˜²æªæ–½

### å¼€å‘ç¯å¢ƒå¥åº·æ£€æŸ¥
```bash
# daily-health-check.bat
@echo off
echo ğŸ¥ Development Environment Health Check
echo.

echo [1/5] Node.js version
node -v

echo [2/5] npm version
npm -v

echo [3/5] Disk space
wmic logicaldisk get size,freespace,caption

echo [4/5] Process check
tasklist | findstr node.exe

echo [5/5] Cache size
for /d %i in (.next, node_modules) do @echo %i && @dir /s %i | findstr "File(s)"

echo.
echo âœ… Health check complete
```

### å®šæœŸç»´æŠ¤
```bash
# Weekly: æ¸…ç†ç¼“å­˜
npm cache clean --force
Remove-Item -Recurse -Force .next

# Monthly: æ›´æ–°ä¾èµ–
npm update
npm audit fix

# Quarterly: å¤§æ‰«é™¤
Remove-Item -Recurse -Force node_modules
npm install
```

---

## ğŸ“Š å¸¸è§é”™è¯¯é€ŸæŸ¥è¡¨

| é”™è¯¯å…³é”®è¯ | æ ¹æœ¬åŸå›  | å¿«é€Ÿä¿®å¤ | æˆåŠŸç‡ |
|-----------|---------|---------|--------|
| `Cannot find module` | ç¼“å­˜æŸå | `.\quick-fix-nextjs.bat` | 90% |
| `.next/server` | æ„å»ºç¼“å­˜ | åˆ é™¤.next | 95% |
| `vendor-chunks` | Chunkå¤±è´¥ | åˆ é™¤.next | 95% |
| `EADDRINUSE` | ç«¯å£å ç”¨ | `taskkill /F /IM node.exe` | 100% |
| `Module not found` | æ–‡ä»¶ç¼ºå¤± | æ£€æŸ¥è·¯å¾„ | 80% |
| `Hydration failed` | SSRä¸åŒ¹é… | ä½¿ç”¨useEffect | 70% |
| `Database connection` | ç½‘ç»œ/å‡­æ® | æ£€æŸ¥ç¯å¢ƒå˜é‡ | 90% |
| `prisma generate` | Schemaå˜åŒ– | `npx prisma generate` | 100% |

---

## ğŸ“ å­¦ä¹ æ›²çº¿

### æ–°æ‰‹ï¼ˆ0-1å¹´ï¼‰
- é‡åˆ°é”™è¯¯ â†’ Google â†’ å°è¯•å¤šä¸ªæ–¹æ¡ˆ â†’ 30-120åˆ†é’Ÿ
- é—®é¢˜é‡å¤å‡ºç° â†’ æ¯æ¬¡éƒ½è¦é‡æ–°æœç´¢

### ä¸­çº§ï¼ˆ1-5å¹´ï¼‰
- é‡åˆ°é”™è¯¯ â†’ çŸ¥é“å¤§æ¦‚æ–¹å‘ â†’ å°è¯•2-3ä¸ªæ–¹æ¡ˆ â†’ 10-30åˆ†é’Ÿ
- æœ‰äº›é—®é¢˜æœ‰å°è±¡ â†’ ä½†å¿˜äº†å…·ä½“æ­¥éª¤

### é«˜çº§ï¼ˆ5-10å¹´ï¼‰
- é‡åˆ°é”™è¯¯ â†’ å¿«é€Ÿè¯Šæ–­ â†’ æ‰§è¡Œæ ‡å‡†ä¿®å¤ â†’ 2-5åˆ†é’Ÿ
- å»ºç«‹äº†ä¸ªäººçŸ¥è¯†åº“ â†’ ä½†è¿˜ä¸å¤Ÿç³»ç»ŸåŒ–

### ä¸“å®¶ï¼ˆ10-40å¹´ï¼‰â­â­â­â­â­
- é‡åˆ°é”™è¯¯ â†’ çœ‹å…³é”®è¯ â†’ æ‰§è¡Œè„šæœ¬ â†’ 30ç§’-2åˆ†é’Ÿ
- å®Œæ•´çš„æ ‡å‡†åŒ–å·¥å…·ç®± â†’ è‡ªåŠ¨åŒ–ä¸€åˆ‡
- **ä»ä¸é‡å¤çŠ¯åŒæ ·çš„é”™è¯¯**

---

## ğŸ’¡ æœ¬æ¬¡é—®é¢˜æ€»ç»“

### é—®é¢˜
```
Error: Cannot find module './vendor-chunks/@swc.js'
```

### æ ¹æœ¬åŸå› 
Next.jsçš„`.next`æ„å»ºç¼“å­˜æŸåï¼ˆå¯èƒ½å› ä¸ºä¹‹å‰çš„å¼‚å¸¸ä¸­æ–­ï¼‰

### è§£å†³æ–¹æ¡ˆ
```bash
1. åœæ­¢Nodeè¿›ç¨‹
2. åˆ é™¤.nextç›®å½•
3. é‡å¯å¼€å‘æœåŠ¡å™¨
```

### æ—¶é—´
- è¯Šæ–­ï¼š5ç§’ï¼ˆçœ‹åˆ°å…³é”®è¯ï¼‰
- ä¿®å¤ï¼š30ç§’ï¼ˆæ‰§è¡Œè„šæœ¬ï¼‰
- éªŒè¯ï¼š10ç§’ï¼ˆè®¿é—®é¡µé¢ï¼‰
- **æ€»è®¡ï¼š45ç§’**

### åˆ›å»ºçš„èµ„äº§
1. âœ… `quick-fix-nextjs.bat` - å¿«é€Ÿä¿®å¤è„šæœ¬
2. âœ… `fix-nextjs-build-error.bat` - å®Œæ•´ä¿®å¤è„šæœ¬
3. âœ… `ğŸ“šNext.jså¸¸è§é”™è¯¯è§£å†³æ–¹æ¡ˆ-40å¹´è€å…µç»éªŒ.md` - çŸ¥è¯†æ–‡æ¡£

### ä»·å€¼
- **çŸ­æœŸ**ï¼šé—®é¢˜ç«‹å³è§£å†³
- **ä¸­æœŸ**ï¼šä¸‹æ¬¡30ç§’è§£å†³
- **é•¿æœŸ**ï¼šå›¢é˜Ÿæ‰€æœ‰äººéƒ½èƒ½30ç§’è§£å†³

---

## ğŸš€ ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜

```bash
# 1ç§’é’Ÿçš„è§£å†³æ–¹æ¡ˆ
.\quick-fix-nextjs.bat
```

**å®Œæˆï¼** ğŸ‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| æœ¬æ–‡æ¡£ | Next.jsé”™è¯¯è§£å†³ |
| `âœ…å›¾ç‰‡é—®é¢˜ç»ˆæè§£å†³æ–¹æ¡ˆ.md` | å›¾ç‰‡æ˜¾ç¤ºé—®é¢˜ |
| `ğŸ”¥ä¸‹æ¬¡å¯¼å…¥å¿…è¯»-é¿å…é‡å¤7-8é.md` | æ•°æ®å¯¼å…¥æ ‡å‡†æµç¨‹ |
| `ğŸ¯å†å¹´çœŸé¢˜å¯¼å…¥ç»ˆæè§£å†³æ–¹æ¡ˆ-å®Œæ•´è®°å½•.md` | å¯¼å…¥é—®é¢˜å¤§å…¨ |

**æ‰€æœ‰é—®é¢˜éƒ½æœ‰æ ‡å‡†åŒ–è§£å†³æ–¹æ¡ˆï¼æ°¸ä¸é‡å¤ï¼** âœ…
