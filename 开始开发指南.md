# 🚀 医药考试通 - 快速开始开发指南

欢迎！这份指南将帮助你快速启动项目并开始开发。

---

## ✅ 前置检查

在开始之前，确保你的开发环境已安装：

```bash
node -v    # 需要 Node.js 18.17 或更高版本
npm -v     # 或使用 yarn/pnpm
git --version
```

---

## 📦 1. 安装依赖

```bash
# 进入项目目录
cd e:/tiku

# 安装所有依赖
npm install

# 如果遇到依赖冲突，可以尝试
npm install --legacy-peer-deps
```

---

## 🗄️ 2. 配置数据库

### 方案 A：使用 Supabase（推荐，最简单）

1. 访问 [https://supabase.com](https://supabase.com)
2. 创建免费账号并新建项目
3. 在项目设置中找到数据库连接字符串
4. 复制 `.env.example` 为 `.env.local`
5. 填入数据库 URL

```env
DATABASE_URL="postgresql://postgres:password@db.xxx.supabase.co:5432/postgres"
```

### 方案 B：使用本地 PostgreSQL

1. 安装 PostgreSQL（如果还没有）
   - Windows: https://www.postgresql.org/download/windows/
   - Mac: `brew install postgresql`

2. 创建数据库
```bash
# Windows PowerShell
psql -U postgres
CREATE DATABASE medexam_dev;
\q
```

3. 配置环境变量
```env
DATABASE_URL="postgresql://postgres:your_password@localhost:5432/medexam_dev"
```

---

## 🔧 3. 初始化数据库

```bash
# 生成 Prisma Client
npm run db:generate

# 推送数据库结构
npm run db:push

# 插入种子数据（测试用）
npx tsx prisma/seed.ts
```

**注意**：如果遇到 `tsx` 命令找不到，先安装：
```bash
npm install -D tsx
```

---

## 🎯 4. 配置环境变量

复制 `.env.example` 为 `.env.local`，然后填写必要的配置：

### 最小配置（能运行起来）
```env
DATABASE_URL="你的数据库连接字符串"
NEXTAUTH_SECRET="随便输入一个长字符串"
NEXTAUTH_URL="http://localhost:3000"
```

### 完整配置（包含AI功能）
```env
DATABASE_URL="..."
NEXTAUTH_SECRET="..."
NEXTAUTH_URL="..."
OPENAI_API_KEY="sk-..."  # 从 https://platform.openai.com 获取
```

---

## 🚀 5. 启动开发服务器

```bash
npm run dev
```

打开浏览器访问：[http://localhost:3000](http://localhost:3000)

你应该能看到首页！🎉

---

## 👥 6. 测试账号登录

数据库种子数据已经创建了测试账号：

| 角色 | 邮箱 | 密码 |
|------|------|------|
| 管理员 | admin@medexam.pro | admin123456 |
| 普通用户 | user1@example.com | password123 |

**注意**：登录功能需要先实现，如果还没有登录页面，请参考 `CURSOR_PROMPTS.md` 中的 Prompt 1。

---

## 📂 7. 项目结构说明

```
e:/tiku/
├── app/                        # Next.js 14 App Router
│   ├── api/                    # API 路由
│   │   ├── questions/          # 题目相关 API
│   │   └── answers/            # 答题相关 API
│   ├── exams/                  # 考试分类页面
│   ├── practice/               # 练习页面
│   ├── wrong-questions/        # 错题本页面
│   ├── page.tsx                # 首页
│   ├── layout.tsx              # 全局布局
│   └── globals.css             # 全局样式
│
├── components/                 # React 组件
│   ├── ui/                     # UI 组件（按钮、卡片等）
│   └── ...                     # 业务组件
│
├── lib/                        # 工具库
│   ├── prisma.ts               # Prisma Client 实例
│   └── utils.ts                # 工具函数
│
├── prisma/                     # Prisma 配置
│   ├── schema.prisma           # 数据库模型定义
│   └── seed.ts                 # 种子数据
│
├── public/                     # 静态资源
│
├── .env.local                  # 环境变量（不提交到 Git）
├── .env.example                # 环境变量模板
├── package.json                # 依赖配置
├── tailwind.config.ts          # Tailwind CSS 配置
├── tsconfig.json               # TypeScript 配置
│
└── 文档/
    ├── 项目架构方案.md
    ├── 实施方案与TODO清单.md
    ├── CURSOR_PROMPTS.md       # ⭐ Cursor AI 开发 Prompt
    ├── SEO优化方案.md
    └── 开始开发指南.md         # 📖 你正在看的文件
```

---

## 🎨 8. 使用 Cursor AI 快速开发

项目已经为你准备了一系列完整的 AI Prompt，可以快速实现各个功能模块。

### 使用方法：

1. **打开 `CURSOR_PROMPTS.md`**
2. **找到你要实现的功能**（例如：用户认证、做题页面）
3. **复制对应的 Prompt**
4. **在 Cursor 中按 `Cmd/Ctrl + K`**
5. **粘贴 Prompt 并执行**

### 推荐的开发顺序：

```
第1周：核心功能
✅ Prompt 1: 用户认证系统（注册/登录）
✅ Prompt 2: 做题页面核心功能
✅ Prompt 4: 错题本功能完善

第2周：增强功能
✅ Prompt 3: 学习统计与报告
✅ Prompt 4: AI 智能解析
✅ Prompt 6: 管理后台（题库管理）

第3周：商业化
✅ Prompt 5: 会员系统与支付

第4周：优化
✅ Prompt 7: SEO 优化
✅ Prompt 10: 移动端优化
```

---

## 🐛 9. 常见问题解决

### Q1: 数据库连接失败
```bash
# 检查 DATABASE_URL 是否正确
# 检查数据库是否已启动
# 尝试重新生成 Prisma Client
npm run db:generate
```

### Q2: 依赖安装失败
```bash
# 清除缓存
rm -rf node_modules package-lock.json
npm install

# 或使用 --legacy-peer-deps
npm install --legacy-peer-deps
```

### Q3: 端口 3000 被占用
```bash
# 修改端口
npm run dev -- -p 3001
```

### Q4: TypeScript 报错
```bash
# 重启 TypeScript 服务器
# VS Code: Cmd/Ctrl + Shift + P → "TypeScript: Restart TS Server"
```

### Q5: Prisma Studio 打不开
```bash
# 确保数据库连接正常
npm run db:studio

# 访问 http://localhost:5555
```

---

## 📊 10. 数据库管理工具

### Prisma Studio（推荐）
```bash
npm run db:studio
```
- 可视化界面
- 直接编辑数据
- 无需安装其他工具

### pgAdmin（可选）
- 下载：https://www.pgadmin.org/
- 功能更强大，适合复杂操作

---

## 🧪 11. 测试数据

项目已经通过种子文件创建了测试数据：

- **5 个用户**（含1个管理员，2个VIP）
- **10 道题目**（覆盖4种考试类型）
- **30 条答题记录**
- **10 条错题记录**
- **5 条收藏记录**
- **5 条学习记录**

你可以直接使用这些数据进行开发和测试。

---

## 📝 12. 下一步开发建议

### MVP 阶段（第1-2周）

1. **实现用户认证**
   ```bash
   # 使用 CURSOR_PROMPTS.md → Prompt 1
   # 创建 /app/register/page.tsx
   # 创建 /app/login/page.tsx
   # 创建 API 路由
   ```

2. **实现做题功能**
   ```bash
   # 使用 CURSOR_PROMPTS.md → Prompt 2
   # 创建 /app/practice/question/[id]/page.tsx
   # 完善题目展示、答题、解析功能
   ```

3. **完善错题本**
   ```bash
   # 错题本页面已有基础 UI
   # 需要实现：数据获取、重练功能、删除功能
   ```

### 扩展阶段（第3-4周）

4. **学习中心（数据统计）**
5. **AI 功能集成**
6. **管理后台**
7. **会员系统**

---

## 🎯 13. 开发技巧

### 使用 Prisma Studio 查看数据
```bash
npm run db:studio
# 在浏览器中查看和编辑数据，非常直观
```

### 使用 TypeScript 类型提示
```typescript
// Prisma 自动生成类型，享受完整的类型检查
import { Question, User } from '@prisma/client';
```

### 使用 Tailwind CSS 快速开发 UI
```tsx
// 不需要写 CSS 文件，直接用类名
<div className="bg-blue-500 text-white rounded-lg p-4 hover:bg-blue-600">
  按钮
</div>
```

### 热更新
- 修改代码后，浏览器会自动刷新
- 修改 Prisma Schema 后，运行 `npm run db:push`

---

## 📚 14. 学习资源

- **Next.js 文档**: https://nextjs.org/docs
- **Prisma 文档**: https://www.prisma.io/docs
- **Tailwind CSS**: https://tailwindcss.com/docs
- **TypeScript 手册**: https://www.typescriptlang.org/docs

---

## 🆘 15. 获取帮助

如果遇到问题：

1. **查看项目文档**
   - `实施方案与TODO清单.md`
   - `CURSOR_PROMPTS.md`
   - `SEO优化方案.md`

2. **使用 Cursor AI**
   - 按 `Cmd/Ctrl + L` 问问题
   - "这个错误是什么意思？如何修复？"
   - "如何实现XXX功能？"

3. **查看 Next.js/Prisma 文档**

---

## ✅ 准备好了吗？

现在你可以：

1. ✅ 启动开发服务器：`npm run dev`
2. ✅ 打开 Prisma Studio：`npm run db:studio`
3. ✅ 打开 `CURSOR_PROMPTS.md`，开始实现第一个功能
4. ✅ 逐步完成 TODO 清单中的任务

---

## 🎉 祝你开发顺利！

记住：

- **不要急于求成**，一步一步实现功能
- **充分利用 AI**，Cursor 是你的好帮手
- **经常提交代码**，使用 Git 管理版本
- **先做 MVP**，再优化和扩展

加油！🚀

如果这个项目帮到你，别忘了给它点个 Star ⭐

