# ⚡ 快速启用历年真题功能

## 3步启用历年真题

### 第1步：更新数据库（1分钟）

**打开 Supabase Dashboard SQL Editor:**
```
https://supabase.com/dashboard/project/tparjdkxxtnentsdazfw
```

**复制并执行以下SQL:**

```sql
-- 添加历年真题字段
ALTER TABLE questions 
ADD COLUMN IF NOT EXISTS source_type TEXT,
ADD COLUMN IF NOT EXISTS source_year INTEGER;

-- 创建索引
CREATE INDEX IF NOT EXISTS idx_questions_source_year 
ON questions(source_year);

CREATE INDEX IF NOT EXISTS idx_questions_source_year_subject 
ON questions(source_year, subject);
```

✅ 看到执行成功提示即可。

---

### 第2步：导入真题数据（2分钟）

#### 导入2024年真题（50题）

**打开文件:** `⚡导入2024真题-快速脚本.sql`

**操作:**
1. Ctrl+A 全选
2. Ctrl+C 复制
3. 粘贴到 SQL Editor
4. 点击 Run 执行

**预期结果:** 导入50道2024年真题

---

#### 导入2023年真题（精选）

**打开文件:** `导入2023年中药药综真题.sql`

**操作:**
1. Ctrl+A 全选
2. Ctrl+C 复制
3. 粘贴到 SQL Editor
4. 点击 Run 执行

**预期结果:** 导入精选2023年真题

---

### 第3步：启动并测试（30秒）

```bash
# 启动开发服务器
npm run dev
```

**访问:** `http://localhost:3000/practice`

**测试步骤:**
1. 点击"历年真题"卡片
2. 看到2024和2023年份列表
3. 点击"开始练习"
4. 进入答题页面

---

## ✅ 验证导入成功

在 SQL Editor 中运行：

```sql
-- 查看各年份题目数量
SELECT 
  source_year as 年份,
  COUNT(*) as 题目数
FROM questions
WHERE source_year IS NOT NULL
GROUP BY source_year
ORDER BY source_year DESC;
```

**预期输出:**
```
年份   题目数
2024   50
2023   20+
```

---

## 🎯 完整数据导入（可选）

如果需要导入完整120题，告诉我：

### 按年份
- "生成2024年第51-80题"
- "生成2023年第31-60题"

### 按题型
- "生成2024年所有配伍题"
- "生成2023年所有综合分析题"

### 按题号
- "生成2024年题号70-100"

我会立即生成对应的SQL脚本！

---

## 📱 功能预览

### 历年真题列表页
```
┌─────────────────────────────────────┐
│  📚 历年真题                         │
├─────────────────────────────────────┤
│  [2024] 2024年真题                   │
│  📄 120道题  ✓ 45题  📈 82%          │
│  [开始练习] [模拟考试]               │
├─────────────────────────────────────┤
│  [2023] 2023年真题                   │
│  📄 120道题  ⏸ 未开始                │
│  [开始练习] [模拟考试]               │
└─────────────────────────────────────┘
```

### 答题页面
```
┌─────────────────────────────────────┐
│  ← 2024年真题练习      1/120        │
├─────────────────────────────────────┤
│  [2024年真题] [单选题] [中医基础]   │
│                                      │
│  1. 题目内容在这里...                │
│                                      │
│  ○ A. 选项A                          │
│  ● B. 选项B (已选)                   │
│  ○ C. 选项C                          │
│  ○ D. 选项D                          │
│                                      │
│  [提交答案]                          │
├─────────────────────────────────────┤
│  题目导航: [1][2][3][4][5]...       │
└─────────────────────────────────────┘
```

---

## 🚨 常见问题

### Q: SQL执行报错怎么办？

**A:** 检查：
1. 字段是否已存在（忽略"already exists"错误）
2. 表名是否正确（应该是`questions`）
3. 数据库连接是否正常

### Q: 前端看不到历年真题？

**A:** 检查：
1. 数据是否成功导入
2. API是否返回数据
3. 浏览器控制台是否有错误

**验证方法:**
```bash
# 测试API
curl "http://localhost:3000/api/questions?sourceYear=2024&limit=5"
```

### Q: 题目数量不对？

**A:** 运行验证SQL：
```sql
SELECT 
  source_year, 
  COUNT(*) 
FROM questions 
WHERE source_year IN (2023, 2024)
GROUP BY source_year;
```

---

## 📞 需要帮助？

**遇到问题时的检查步骤:**

1. **数据库检查**
   ```sql
   -- 查看questions表结构
   SELECT column_name, data_type 
   FROM information_schema.columns 
   WHERE table_name = 'questions';
   ```

2. **API测试**
   ```bash
   # 测试连接
   npx tsx test-api-connection.ts
   ```

3. **浏览器控制台**
   - F12 打开开发者工具
   - 查看Console标签页
   - 查看Network标签页

---

## 🎉 完成后你将拥有

- ✅ 完整的历年真题功能
- ✅ 2024年真题（50+题）
- ✅ 2023年真题（20+题）
- ✅ 按年份分类浏览
- ✅ 答题进度追踪
- ✅ 详细答案解析
- ✅ 题目导航功能

---

**总耗时:** 约3-5分钟
**难度:** ⭐⭐ (简单)

**立即开始吧！** 🚀
